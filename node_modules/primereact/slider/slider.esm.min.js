import*as e from"react";import{useEventListener as r}from"primereact/hooks";import{ObjectUtils as t,DomHandler as n,classNames as o,mergeProps as i}from"primereact/utils";import{ComponentBase as a}from"primereact/componentbase";import{PrimeReactContext as l}from"primereact/api";function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,r){if("object"!==u(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}function s(e){var r=c(e,"string");return"symbol"===u(r)?r:String(r)}function f(e,r,t){return(r=s(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function p(e){if(Array.isArray(e))return m(e)}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function y(e,r){if(e){if("string"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?m(e,r):void 0}}function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e){if(Array.isArray(e))return e}function g(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=i.call(t)).done)&&(l.push(n.value),l.length!==r);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,r){return b(e)||g(e,r)||y(e,r)||h()}var w=a.extend({defaultProps:{__TYPE:"Slider",id:null,value:null,min:0,max:100,orientation:"horizontal",step:null,range:!1,style:null,className:null,disabled:!1,tabIndex:0,onChange:null,onSlideEnd:null,children:void 0}});function x(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function O(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?x(Object(t),!0).forEach((function(r){f(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):x(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var E=e.memo(e.forwardRef((function(a,u){var c=e.useContext(l),s=w.getProps(a,c),f=e.useRef(null),m=e.useRef(0),b=e.useRef(!1),g=e.useRef(!1),h=e.useRef(0),x=e.useRef(0),E=e.useRef(0),j=e.useRef(0),P=s.range?s.value||[s.min,s.max]:s.value||0,A="horizontal"===s.orientation,R="vertical"===s.orientation,D=S(r({type:"mousemove",listener:function(e){return U(e)}}),2),I=D[0],C=D[1],N=S(r({type:"mouseup",listener:function(e){return X(e)}}),2),M=N[0],T=N[1],k=S(r({type:"touchmove",listener:function(e){return U(e)}}),2),F=k[0],z=k[1],W=S(r({type:"touchend",listener:function(e){return X(e)}}),2),Y=W[0],_=W[1],H=w.setMetaData({props:s}).ptm,K=function(e,r){Q(e,(s.range?P[m.current]:P)+(s.step||1)*r),e.preventDefault()},L=function(e,r){s.disabled||(g.current=!0,G(),b.current=!0,m.current=r)},U=function(e){g.current&&(J(e),e.preventDefault())},X=function(e){if(g.current){g.current=!1;var r=J(e);s.onSlideEnd&&s.onSlideEnd({originalEvent:e,value:r}),C(),T(),z(),_()}},B=function(e,r){I(),M(),L(0,r)},$=function(e,r){F(),Y(),L(0,r)},q=function(e,r){if(!s.disabled){m.current=r;var t=e.key;"ArrowRight"===t||"ArrowUp"===t?K(e,1):"ArrowLeft"!==t&&"ArrowDown"!==t||K(e,-1)}},G=function(){var e=f.current.getBoundingClientRect();h.current=e.left+n.getWindowScrollLeft(),x.current=e.top+n.getWindowScrollTop(),E.current=f.current.offsetWidth,j.current=f.current.offsetHeight},J=function(e){var r=(A?100*((e.touches?e.touches[0].pageX:e.pageX)-h.current)/E.current:100*(x.current+j.current-(e.touches?e.touches[0].pageY:e.pageY))/j.current)/100*(s.max-s.min)+s.min;if(s.step){var t=s.range?P[m.current]:P,n=r-t;n<0?r=t+Math.ceil(r/s.step-t/s.step)*s.step:n>0&&(r=t+Math.floor(r/s.step-t/s.step)*s.step)}else r=Math.floor(r);return Q(e,r)},Q=function(e,r){var t,n=parseFloat(r.toFixed(10)),o=n;return s.range?(0===m.current?n<s.min?n=s.min:n>s.max&&(n=s.max):n>s.max?n=s.max:n<s.min&&(n=s.min),(o=p(t=P)||d(t)||y(t)||v())[m.current]=n,s.onChange&&s.onChange({originalEvent:e,value:o})):(n<s.min?n=s.min:n>s.max&&(n=s.max),o=n,s.onChange&&s.onChange({originalEvent:e,value:o})),o},V=function(r,t,n){var a={transition:g.current?"none":null,left:null!==r&&r+"%",bottom:t&&t+"%"},l=o("p-slider-handle",{"p-slider-handle-start":0===n,"p-slider-handle-end":1===n,"p-slider-handle-active":m.current===n}),u=i(O({className:l,style:a,tabIndex:s.tabIndex,role:"slider",onMouseDown:function(e){return B(0,n)},onTouchStart:function(e){return $(0,n)},onKeyDown:function(e){return q(e,n)},"aria-valuemin":s.min,"aria-valuemax":s.max,"aria-valuenow":r||t,"aria-orientation":s.orientation},le),H("handle"));return e.createElement("span",u)};e.useImperativeHandle(u,(function(){return{props:s,getElement:function(){return f.current}}}));var Z,ee,re,te,ne,oe,ie,ae=w.getOtherProps(s),le=t.reduceKeys(ae,n.ARIA_PROPS),ue=o("p-slider p-component",s.className,{"p-disabled":s.disabled,"p-slider-horizontal":A,"p-slider-vertical":R}),ce=s.range?(Z=100*(P[0]<s.min?s.min:P[0]-s.min)/(s.max-s.min),ee=100*(P[1]>s.max?s.max:P[1]-s.min)/(s.max-s.min),re=A?V(Z,null,0):V(null,Z,0),te=A?V(ee,null,1):V(null,ee,1),ne=ee>Z?ee-Z:Z-ee,oe=ee>Z?Z:ee,ie=i({className:"p-slider-range",style:A?{left:oe+"%",width:ne+"%"}:{bottom:oe+"%",height:ne+"%"}},H("range")),e.createElement(e.Fragment,null,e.createElement("span",ie),re,te)):function(){var r;r=P<s.min?s.min:P>s.max?s.max:100*(P-s.min)/(s.max-s.min);var t=A?{width:r+"%"}:{height:r+"%"},n=A?V(r,null,null):V(null,r,null),o=i({className:"p-slider-range",style:t},H("range"));return e.createElement(e.Fragment,null,e.createElement("span",o),n)}(),se=i({ref:f,id:s.id,style:s.style,className:ue,onClick:function(e){if(!s.disabled){if(!b.current){G();var r=J(e);s.onSlideEnd&&s.onSlideEnd({originalEvent:e,value:r})}b.current=!1}}},w.getOtherProps(s),H("root"));return e.createElement("div",se,ce)})));E.displayName="Slider";export{E as Slider};
