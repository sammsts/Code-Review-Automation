"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/hooks"),r=require("primereact/icons/chevrondown"),l=require("primereact/icons/times"),o=require("primereact/icons/timescircle"),i=require("primereact/overlayservice"),c=require("primereact/tooltip"),a=require("primereact/utils"),u=require("primereact/componentbase"),s=require("primereact/csstransition"),p=require("primereact/portal"),m=require("primereact/virtualscroller"),f=require("primereact/icons/check"),d=require("primereact/icons/search"),b=require("primereact/inputtext"),v=require("primereact/ripple");function y(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function g(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var h=g(e),O=y(t);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function S(e,t){if("object"!==I(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function j(e){var t=S(e,"string");return"symbol"===I(t)?t:String(t)}function P(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){if(Array.isArray(e))return x(e)}function w(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function C(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function D(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(e){return k(e)||w(e)||C(e)||D()}function F(e){if(Array.isArray(e))return e}function T(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o,i,c=[],a=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;a=!1}else for(;!(a=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);a=!0);}catch(e){u=!0,l=e}finally{try{if(!a&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw l}}return c}}function U(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function L(e,t){return F(e)||T(e,t)||C(e,t)||U()}var A=u.ComponentBase.extend({defaultProps:{__TYPE:"MultiSelect",appendTo:null,ariaLabelledBy:null,className:null,closeIcon:null,checkboxIcon:null,dataKey:null,disabled:!1,display:"comma",dropdownIcon:null,emptyFilterMessage:null,filter:!1,filterBy:null,filterInputAutoFocus:!0,filterLocale:void 0,filterMatchMode:"contains",filterPlaceholder:null,filterTemplate:null,fixedPlaceholder:!1,flex:!1,id:null,itemCheckboxIcon:null,inline:!1,inputId:null,inputRef:null,itemClassName:null,itemTemplate:null,maxSelectedLabels:null,name:null,onClick:null,onBlur:null,onChange:null,onFilter:null,onFocus:null,onHide:null,onSelectAll:null,onShow:null,optionDisabled:null,optionGroupChildren:null,optionGroupLabel:null,optionGroupTemplate:null,optionLabel:null,optionValue:null,options:null,overlayVisible:!1,panelClassName:null,panelFooterTemplate:null,panelHeaderTemplate:null,panelStyle:null,placeholder:null,removeIcon:null,resetFilterOnHide:!1,scrollHeight:"200px",selectAll:!1,selectedItemTemplate:null,selectedItemsLabel:"{0} items selected",selectionLimit:null,showClear:!1,showSelectAll:!0,style:null,tabIndex:0,tooltip:null,tooltipOptions:null,transitionOptions:null,useOptionAsValue:!1,value:null,virtualScrollerOptions:null,children:void 0}}),R=u.ComponentBase.extend({defaultProps:{__TYPE:"Checkbox",autoFocus:!1,checked:!1,className:null,disabled:!1,falseValue:!1,icon:null,id:null,inputId:null,inputRef:null,name:null,onChange:null,onClick:null,onContextMenu:null,onMouseDown:null,readOnly:!1,required:!1,style:null,tabIndex:null,tooltip:null,tooltipOptions:null,trueValue:!0,value:null,children:void 0}});function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=h.memo(h.forwardRef((function(e,r){var l=h.useContext(t.PrimeReactContext),o=R.getProps(e,l),i=L(h.useState(!1),2),u=i[0],s=i[1],p=R.setMetaData({props:o,state:{focused:u}}).ptm,m=h.useRef(null),d=h.useRef(o.inputRef),b=function(e){if(!o.disabled&&!o.readOnly&&(o.onChange||o.onClick)){var t=v(),n=e.target instanceof HTMLDivElement||e.target instanceof HTMLSpanElement||e.target instanceof Object;if(e.target===d.current||n&&e.target.checked!==t){var r=t?o.falseValue:o.trueValue,l={originalEvent:e,value:o.value,checked:r,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{type:"checkbox",name:o.name,id:o.id,value:o.value,checked:r}};if(o.onClick&&o.onClick(l),e.defaultPrevented)return;o.onChange&&o.onChange(l)}a.DomHandler.focus(d.current),e.preventDefault()}},v=function(){return o.checked===o.trueValue};h.useImperativeHandle(r,(function(){return{props:o,focus:function(){return a.DomHandler.focus(d.current)},getElement:function(){return m.current},getInput:function(){return d.current}}})),h.useEffect((function(){a.ObjectUtils.combinedRefs(d,o.inputRef)}),[d,o.inputRef]),n.useUpdateEffect((function(){d.current.checked=v()}),[o.checked,o.trueValue]),n.useMountEffect((function(){o.autoFocus&&a.DomHandler.focus(d.current,o.autoFocus)}));var y=v(),g=a.ObjectUtils.isNotEmpty(o.tooltip),O=R.getOtherProps(o),I=a.ObjectUtils.reduceKeys(O,a.DomHandler.ARIA_PROPS),S=a.classNames("p-checkbox p-component",{"p-checkbox-checked":y,"p-checkbox-disabled":o.disabled,"p-checkbox-focused":u},o.className),j=a.classNames("p-checkbox-box",{"p-highlight":y,"p-disabled":o.disabled,"p-focus":u}),P=a.mergeProps({className:"p-checkbox-icon p-c"},p("icon")),x=a.IconUtils.getJSXIcon(y?o.icon||h.createElement(f.CheckIcon,P):null,M({},P),{props:o,checked:y}),k=a.mergeProps({ref:m,id:o.id,className:S,style:o.style,onClick:function(e){return b(e)},onContextMenu:o.onContextMenu,onMouseDown:o.onMouseDown},O,p("root")),w=a.mergeProps({className:"p-hidden-accessible"},p("hiddenInputWrapper")),C=a.mergeProps(M({id:o.inputId,ref:d,type:"checkbox",name:o.name,tabIndex:o.tabIndex,defaultChecked:y,onFocus:function(e){s(!0)},onBlur:function(e){s(!1)},onKeyDown:function(e){var t;"Space"!==(t=e).code&&" "!==t.key||b(t)},disabled:o.disabled,readOnly:o.readOnly,required:o.required},I),p("hiddenInput")),D=a.mergeProps({className:j},p("input"));return h.createElement(h.Fragment,null,h.createElement("div",k,h.createElement("div",w,h.createElement("input",C)),h.createElement("div",D,x)),g&&h.createElement(c.Tooltip,E({target:m,content:o.tooltip},o.tooltipOptions,{pt:p("tooltip")})))})));function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}q.displayName="Checkbox";var K=h.memo((function(e){var n={filter:function(e){return r(e)},reset:function(){return e.resetFilter()}},r=function(t){e.onFilter&&e.onFilter({originalEvent:t,query:t.target.value})},o=function(t){e.onSelectAll&&e.onSelectAll({originalEvent:t,checked:e.selectAll}),t.preventDefault()},i=function(){var t="p-multiselect-filter-icon",l=a.mergeProps({className:t},e.ptm("filterIcon")),o=a.IconUtils.getJSXIcon(e.filterIcon||h.createElement(d.SearchIcon,l),G({},l),{props:e});if(e.filter){var i=a.classNames("p-multiselect-filter-container"),c=a.mergeProps({className:i},e.ptm("filterContainer")),u=h.createElement("div",c,h.createElement(b.InputText,{ref:e.filterRef,type:"text",role:"textbox",value:e.filterValue,onChange:r,className:"p-multiselect-filter",placeholder:e.filterPlaceholder,pt:e.ptm("filterInput")}),o);if(e.filterTemplate)u=a.ObjectUtils.getJSXElement(e.filterTemplate,{className:i,element:u,filterOptions:n,onFilter:r,filterIconClassName:t,props:e});return h.createElement(h.Fragment,null,u)}return null}(),c=a.mergeProps({className:"p-checkbox-icon p-c"},e.ptm("headerCheckbox")),u=a.IconUtils.getJSXIcon(e.itemCheckboxIcon||h.createElement(f.CheckIcon,c),G({},c),{selected:e.selected}),s=e.showSelectAll?h.createElement(q,{checked:e.selectAll,onChange:o,role:"checkbox","aria-checked":e.selectAll,icon:u}):null,p=a.mergeProps({className:"p-multiselect-close-icon","aria-hidden":!0},e.ptm("closeIcon")),m=a.IconUtils.getJSXIcon(e.closeIcon||h.createElement(l.TimesIcon,p),G({},p),{props:e}),y=a.mergeProps({className:"p-multiselect-header"},e.ptm("header")),g=a.mergeProps({type:"button",className:"p-multiselect-close p-link","aria-label":t.localeOption("close"),onClick:e.onClose},e.ptm("closeButton")),O=h.createElement("button",g,m,h.createElement(v.Ripple,null)),E=h.createElement("div",y,s,i,O);return e.template?a.ObjectUtils.getJSXElement(e.template,{className:"p-multiselect-header",checkboxElement:s,checked:e.selectAll,onChange:o,filterElement:i,closeElement:O,closeElementClassName:"p-multiselect-close p-link",closeIconClassName:"p-multiselect-close-icon",onCloseClick:e.onClose,element:E,itemCheckboxIcon:u,props:e}):E}));function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}K.displayName="MultiSelectHeader";var _=h.memo((function(e){var t=function(t){return e.ptm(t,{context:{selected:e.selected}})},n=a.classNames("p-multiselect-item",{"p-highlight":e.selected,"p-disabled":e.disabled},e.className,e.option.className),r=a.classNames("p-checkbox-box",{"p-highlight":e.selected}),l=a.mergeProps({className:"p-checkbox-icon p-c"},t("checkboxIcon")),o=e.selected?a.IconUtils.getJSXIcon(e.checkboxIcon||h.createElement(f.CheckIcon,l),X({},l),{selected:e.selected}):null,i=e.template?a.ObjectUtils.getJSXElement(e.template,e.option):e.label,c=e.disabled?null:e.tabIndex||0,u=a.mergeProps({className:"p-checkbox p-component"},t("checkboxContainer")),s=a.mergeProps({className:r},t("checkbox")),p=a.mergeProps({className:n,style:e.style,onClick:function(t){e.onClick&&e.onClick({originalEvent:t,option:e.option}),t.preventDefault()},tabIndex:c,onKeyDown:function(t){e.onKeyDown&&e.onKeyDown({originalEvent:t,option:e.option})},role:"option","aria-selected":e.selected},t("item"));return h.createElement("li",p,h.createElement("div",u,h.createElement("div",s,o)),h.createElement("span",null,i),h.createElement(v.Ripple,null))}));function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}_.displayName="MultiSelectItem";var Z=h.memo(h.forwardRef((function(e,n){var r,l,o,i,c,u,f=h.useRef(null),d=h.useRef(null),b=h.useContext(t.PrimeReactContext),v=function(){e.onEnter((function(){if(f.current){var t=e.getSelectedOptionIndex();-1!==t&&setTimeout((function(){return f.current.scrollToIndex(t)}),0)}}))},y=function(){e.onEntered((function(){e.filter&&e.filterInputAutoFocus&&d.current&&a.DomHandler.focus(d.current,!1)}))},g=function(t){f.current&&f.current.scrollToIndex(0),e.onFilterInputChange&&e.onFilterInputChange(t)},I=function(){if(e.panelFooterTemplate){var t=a.ObjectUtils.getJSXElement(e.panelFooterTemplate,e,e.onOverlayHide);return h.createElement("div",{className:"p-multiselect-footer"},t)}return null},S=function(t,n){return e.getOptionGroupChildren(t).map((function(t,r){var l=e.getOptionLabel(t),o=r+"_"+e.getOptionRenderKey(t),i=e.isOptionDisabled(t),c=i?null:e.tabIndex||0,a=e.isSelected(t);return h.createElement(_,{key:o,label:l,option:t,style:n,template:e.itemTemplate,selected:a,onClick:e.onOptionSelect,onKeyDown:e.onOptionKeyDown,tabIndex:c,disabled:i,className:e.itemClassName,checkboxIcon:e.checkboxIcon,ptm:e.ptm})}))},j=function(){var n=a.ObjectUtils.getJSXElement(e.emptyFilterMessage,e)||t.localeOption("emptyFilterMessage"),r=a.mergeProps({className:"p-multiselect-empty-message"},e.ptm("emptyMessage"));return h.createElement("li",r,n)},P=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l={height:r.props?r.props.itemSize:void 0};if(e.optionGroupLabel){var o=e.optionGroupTemplate?a.ObjectUtils.getJSXElement(e.optionGroupTemplate,t,n):e.getOptionGroupLabel(t),i=S(t,l),c=n+"_"+e.getOptionGroupRenderKey(t),u=a.mergeProps({className:"p-multiselect-item-group",style:l},e.ptm("itemGroup"));return h.createElement(h.Fragment,{key:c},h.createElement("li",u,o),i)}var s=e.getOptionLabel(t),p=n+"_"+e.getOptionRenderKey(t),m=e.isOptionDisabled(t),f=m?null:e.tabIndex||0,d=e.isSelected(t);return h.createElement(_,{key:p,label:s,option:t,style:l,template:e.itemTemplate,selected:d,onClick:e.onOptionSelect,onKeyDown:e.onOptionKeyDown,tabIndex:f,disabled:m,className:e.itemClassName,checkboxIcon:e.checkboxIcon,ptm:e.ptm})},x=function(){if(e.virtualScrollerOptions){var t=z(z({},e.virtualScrollerOptions),{style:z(z({},e.virtualScrollerOptions.style),{height:e.scrollHeight}),className:a.classNames("p-multiselect-items-wrapper",e.virtualScrollerOptions.className),items:e.visibleOptions,autoSize:!0,onLazyLoad:function(t){return e.virtualScrollerOptions.onLazyLoad(z(z({},t),{filter:e.filterValue}))},itemTemplate:function(e,t){return e&&P(e,t.index,t)},contentTemplate:function(t){var n=a.classNames("p-multiselect-items p-component",t.className),r=e.visibleOptions&&e.visibleOptions.length||!e.hasFilter?t.children:j(),l=a.mergeProps({ref:t.contentRef,style:t.style,className:n,role:"listbox","aria-multiselectable":!0},e.ptm("list"));return h.createElement("ul",l,r)}});return h.createElement(m.VirtualScroller,E({ref:f},t,{pt:e.ptm("virtualScroller")}))}var n=a.ObjectUtils.isNotEmpty(e.visibleOptions)?e.visibleOptions.map(P):e.hasFilter?j():null,r=a.mergeProps({className:"p-multiselect-items-wrapper",style:{maxHeight:e.scrollHeight}},e.ptm("wrapper")),l=a.mergeProps({className:"p-multiselect-items p-component",role:"listbox","aria-multiselectable":!0},e.ptm("list"));return h.createElement("div",r,h.createElement("ul",l,n))},k=(r=e.allowOptionSelect(),l=a.classNames("p-multiselect-panel p-component",{"p-multiselect-inline":e.inline,"p-multiselect-flex":e.flex,"p-multiselect-limited":!r,"p-input-filled":b&&"filled"===b.inputStyle||"filled"===O.default.inputStyle,"p-ripple-disabled":b&&!1===b.ripple||!1===O.default.ripple},e.panelClassName),o=h.createElement(K,{filter:e.filter,filterRef:d,filterValue:e.filterValue,filterTemplate:e.filterTemplate,onFilter:g,filterPlaceholder:e.filterPlaceholder,onClose:e.onCloseClick,showSelectAll:e.showSelectAll,selectAll:e.isAllSelected(),onSelectAll:e.onSelectAll,template:e.panelHeaderTemplate,resetFilter:e.resetFilter,closeIcon:e.closeIcon,filterIcon:e.filterIcon,itemCheckboxIcon:e.itemCheckboxIcon,ptm:e.ptm}),i=x(),c=I(),u=a.mergeProps({ref:n,className:l,style:e.panelStyle,onClick:e.onClick},e.ptm("panel")),e.inline?h.createElement("div",u,i,c):h.createElement(s.CSSTransition,{nodeRef:n,classNames:"p-connected-overlay",in:e.in,timeout:{enter:120,exit:100},options:e.transitionOptions,unmountOnExit:!0,onEnter:v,onEntered:y,onExit:e.onExit,onExited:e.onExited},h.createElement("div",u,o,i,c)));return e.inline?k:h.createElement(p.Portal,{element:k,appendTo:e.appendTo})})));function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Q(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Z.displayName="MultiSelectPanel";var te=h.memo(h.forwardRef((function(e,u){var s=h.useContext(t.PrimeReactContext),p=A.getProps(e,s),m=L(h.useState(""),2),f=m[0],d=m[1],b=L(h.useState(!1),2),v=b[0],y=b[1],g=L(h.useState(p.inline),2),I=g[0],S=g[1],j=h.useRef(null),x=h.useRef(p.inputRef),k=h.useRef(null),w=h.useRef(null),C=f&&f.trim().length>0,D=a.ObjectUtils.isEmpty(p.value),F=p.optionValue?null:p.dataKey,T=A.setMetaData({props:p,state:{filterState:f,focused:v,overlayVisible:I}}).ptm,U=L(n.useOverlayListener({target:j,overlay:w,listener:function(e,t){t.valid&&("outside"===t.type?!z(e)&&_():_())},when:I}),2),R=U[0],H=U[1],M=function(){return!p.selectionLimit||!p.value||p.value&&p.value.length<p.selectionLimit},q=function(e){var t=e.originalEvent,n=e.option;if(!p.disabled&&!ie(n)){var r=le(n),l=ce(n),o=ee(n),i=M();o?K(t,p.value.filter((function(e){return!a.ObjectUtils.equals(l?e:le(e),r,F)})),n):i&&K(t,[].concat(N(p.value||[]),[r]),n)}},V=function e(t){var n=t.nextElementSibling;return n?a.DomHandler.hasClass(n,"p-disabled")||a.DomHandler.hasClass(n,"p-multiselect-item-group")?e(n):n:null},G=function e(t){var n=t.previousElementSibling;return n?a.DomHandler.hasClass(n,"p-disabled")||a.DomHandler.hasClass(n,"p-multiselect-item-group")?e(n):n:null},K=function(e,t,n){p.onChange&&p.onChange({originalEvent:e,value:t,selectedOption:n,stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},target:{name:p.name,id:p.id,value:t}})},J=function(){d(""),p.onFilter&&p.onFilter({filter:""})},X=function(){S(!0)},_=function(){S(!1)},B=function(){a.DomHandler.alignOverlay(w.current,k.current.parentElement,p.appendTo||s&&s.appendTo||O.default.appendTo)},z=function(e){return a.DomHandler.hasClass(e.target,"p-multiselect-clear-icon")},W=function(e){return w.current&&w.current.contains(e.target)},Q=function(e,t){return t.findIndex((function(t){return e.some((function(e){return a.ObjectUtils.equals(e,le(t),F)}))}))},ee=function(e){if(p.value){var t=le(e),n=ce(e);return p.value.some((function(e){return a.ObjectUtils.equals(n?e:le(e),t,F)}))}return!1},te=function(e){var t;if(p.options)if(p.optionGroupLabel){var n,r=$(p.options);try{for(r.s();!(n=r.n()).done;){if(t=ne(e,oe(n.value)))break}}catch(e){r.e(e)}finally{r.f()}}else t=ne(e,p.options);return t?re(t):null},ne=function(e,t){return t.find((function(t){return a.ObjectUtils.equals(le(t),e,F)}))},re=function(e){return p.optionLabel?a.ObjectUtils.resolveFieldData(e,p.optionLabel):e&&void 0!==e.label?e.label:e},le=function(e){if(p.useOptionAsValue)return e;if(p.optionValue){var t=a.ObjectUtils.resolveFieldData(e,p.optionValue);return null!==t?t:e}return e&&void 0!==e.value?e.value:e},oe=function(e){return a.ObjectUtils.resolveFieldData(e,p.optionGroupChildren)},ie=function(e){return p.optionDisabled?a.ObjectUtils.isFunction(p.optionDisabled)?p.optionDisabled(e):a.ObjectUtils.resolveFieldData(e,p.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled},ce=function(e){return!p.useOptionAsValue&&p.optionValue||e&&void 0!==e.value},ae=function(e,t){var n=p.value.filter((function(e){return!a.ObjectUtils.equals(e,t,F)}));K(e,n,t)},ue=function(){var e=/{(.*?)}/;return e.test(p.selectedItemsLabel)?p.selectedItemsLabel.replace(p.selectedItemsLabel.match(e)[0],p.value.length+""):p.selectedItemsLabel},se=function(){if(!D&&!p.fixedPlaceholder)return a.ObjectUtils.isNotEmpty(p.maxSelectedLabels)&&p.value.length>p.maxSelectedLabels?ue():p.value.reduce((function(e,t,n){return e+(0!==n?",":"")+te(t)}),"")};h.useImperativeHandle(u,(function(){return{props:p,show:X,hide:_,focus:function(){return a.DomHandler.focus(x.current)},getElement:function(){return j.current},getOverlay:function(){return w.current},getInput:function(){return x.current}}})),h.useEffect((function(){a.ObjectUtils.combinedRefs(x,p.inputRef)}),[x,p.inputRef]),h.useEffect((function(){setTimeout((function(){p.overlayVisible?X():_()}),100)}),[p.overlayVisible]),n.useUpdateEffect((function(){I&&C&&B()}),[I,C]),n.useUnmountEffect((function(){a.ZIndexUtils.clear(w.current)}));var pe=function(){if(C){var e=f.trim().toLocaleLowerCase(p.filterLocale),n=p.filterBy?p.filterBy.split(","):[p.optionLabel||"label"];if(p.optionGroupLabel){var r,l=[],o=$(p.options);try{for(o.s();!(r=o.n()).done;){var i=r.value,c=t.FilterService.filter(oe(i),n,e,p.filterMatchMode,p.filterLocale);c&&c.length&&l.push(Y(Y({},i),P({},p.optionGroupChildren,c)))}}catch(e){o.e(e)}finally{o.f()}return l}return t.FilterService.filter(p.options,n,e,p.filterMatchMode,p.filterLocale)}return p.options}(),me=a.ObjectUtils.isNotEmpty(p.tooltip),fe=A.getOtherProps(p),de=a.ObjectUtils.reduceKeys(fe,a.DomHandler.ARIA_PROPS),be=a.classNames("p-multiselect p-component p-inputwrapper",{"p-multiselect-chip":"chip"===p.display,"p-disabled":p.disabled,"p-multiselect-clearable":p.showClear&&!p.disabled,"p-focus":v,"p-inputwrapper-filled":a.ObjectUtils.isNotEmpty(p.value),"p-inputwrapper-focus":v||I},p.className),ve=a.mergeProps({className:"p-multiselect-trigger-icon p-c"},T("triggerIcon")),ye=a.mergeProps({className:"p-multiselect-trigger"},T("trigger")),ge=h.createElement("div",ye,p.dropdownIcon?a.IconUtils.getJSXIcon(p.dropdownIcon,Y({},ve),{props:p}):h.createElement(r.ChevronDownIcon,ve)),he=!p.inline&&function(){var e=p.selectedItemTemplate?D?a.ObjectUtils.getJSXElement(p.selectedItemTemplate):a.ObjectUtils.isNotEmpty(p.maxSelectedLabels)&&p.value.length>p.maxSelectedLabels?ue():p.value.map((function(e,t){var n=a.ObjectUtils.getJSXElement(p.selectedItemTemplate,e);return h.createElement(h.Fragment,{key:t},n)})):"chip"!==p.display||D?se():p.value.slice(0,p.maxSelectedLabels||p.value.length).map((function(e,t){var n=te(e),r=a.mergeProps({key:t,className:"p-multiselect-token-icon",onClick:function(t){return ae(t,e)}},T("removeTokenIcon")),l=!p.disabled&&(p.removeIcon?a.IconUtils.getJSXIcon(p.removeIcon,Y({},r),{props:p}):h.createElement(o.TimesCircleIcon,r)),i=a.mergeProps({className:"p-multiselect-token"},T("token")),c=a.mergeProps({key:n+t,className:"p-multiselect-token-label"},T("tokenLabel"));return h.createElement("div",E({},i,{key:n}),h.createElement("span",c,n),l)})),t=a.classNames("p-multiselect-label",{"p-placeholder":D&&p.placeholder,"p-multiselect-label-empty":D&&!p.placeholder&&!p.selectedItemTemplate,"p-multiselect-items-label":!D&&"chip"!==p.display&&p.value.length>p.maxSelectedLabels}),n=a.mergeProps({ref:k,className:"p-multiselect-label-container"},T("labelContainer")),r=a.mergeProps({className:t},T("label"));return h.createElement("div",n,h.createElement("div",r,e||p.placeholder||"empty"))}(),Oe=!p.inline&&function(){var e=a.mergeProps({className:"p-multiselect-clear-icon",onClick:function(e){return K(e,null,null)}},T("clearIcon")),t=a.IconUtils.getJSXIcon(p.clearIcon||h.createElement(l.TimesIcon,e),Y({},e),{props:p});return D||!p.showClear||p.disabled?null:t}(),Ee=a.mergeProps(Y(Y({ref:j,id:p.id,style:p.style,className:be},fe),{},{onClick:function(e){p.inline||p.disabled||W(e)||a.DomHandler.hasClass(e.target,"p-multiselect-token-icon")||z(e)||(I?_():X(),a.DomHandler.focus(x.current),e.preventDefault())}}),A.getOtherProps(p),T("root")),Ie=a.mergeProps({className:"p-hidden-accessible"},T("hiddenInputWrapper")),Se=a.mergeProps(Y({ref:x,id:p.inputId,name:p.name,type:"text",onFocus:function(e){y(!0),p.onFocus&&p.onFocus(e)},onBlur:function(e){y(!1),p.onBlur&&p.onBlur(e)},onKeyDown:function(e){switch(e.which){case 40:if(p.inline)break;!I&&e.altKey&&(X(),e.preventDefault());break;case 32:if(p.inline)break;I?_():X(),e.preventDefault();break;case 27:if(p.inline)break;_();break;case 9:if(I){var t=a.DomHandler.getFirstFocusableElement(w.current);t&&(t.focus(),e.preventDefault())}}},role:"listbox","aria-expanded":I,disabled:p.disabled,tabIndex:p.tabIndex},de),T("input"));return h.createElement(h.Fragment,null,h.createElement("div",Ee,h.createElement("div",Ie,h.createElement("input",E({},Se,{readOnly:!0}))),!p.inline&&h.createElement(h.Fragment,null,he,Oe,ge),h.createElement(Z,E({ref:w,visibleOptions:pe},p,{onClick:function(e){i.OverlayService.emit("overlay-click",{originalEvent:e,target:j.current})},onOverlayHide:_,filterValue:f,hasFilter:C,onFilterInputChange:function(e){var t=e.query;d(t),p.onFilter&&p.onFilter({originalEvent:e,filter:t})},resetFilter:J,onCloseClick:function(e){_(),a.DomHandler.focus(x.current),e.preventDefault(),e.stopPropagation()},onSelectAll:function(e){if(p.onSelectAll)p.onSelectAll(e);else{var t=null;if(e.checked){if(t=[],pe){var n=pe.filter((function(e){return ie(e)&&ee(e)}));t=n.map((function(e){return le(e)}))}}else if(pe){var r=pe.filter((function(e){return!ie(e)}));p.optionGroupLabel?(t=[],r.forEach((function(e){return t=[].concat(N(t),N(oe(e).filter((function(e){return!ie(e)})).map((function(e){return le(e)}))))}))):t=r.map((function(e){return le(e)}))}K(e.originalEvent,t,t)}},getOptionLabel:re,getOptionRenderKey:function(e){return p.dataKey?a.ObjectUtils.resolveFieldData(e,p.dataKey):re(e)},isOptionDisabled:ie,getOptionGroupChildren:oe,getOptionGroupLabel:function(e){return a.ObjectUtils.resolveFieldData(e,p.optionGroupLabel)},getOptionGroupRenderKey:function(e){return a.ObjectUtils.resolveFieldData(e,p.optionGroupLabel)},isSelected:ee,getSelectedOptionIndex:function(){if(null!=p.value&&p.options){if(p.optionGroupLabel){var e=0,t=p.options.findIndex((function(t,n){return(e=n)&&-1!==Q(p.value,oe(t))}));return-1!==t?{group:e,option:t}:-1}return Q(p.value,p.options)}return-1},isAllSelected:function(){if(p.onSelectAll)return p.selectAll;if(a.ObjectUtils.isEmpty(pe))return!1;var e=pe.filter((function(e){return!ie(e)}));if(p.optionGroupLabel){var t,n=!0,r=$(e);try{for(r.s();!(t=r.n()).done;){!0===oe(t.value).filter((function(e){return!ie(e)})).some((function(e){return!ee(e)}))&&(n=!1)}}catch(e){r.e(e)}finally{r.f()}return n}return!e.some((function(e){return!ee(e)}))},onOptionSelect:q,allowOptionSelect:M,onOptionKeyDown:function(e){var t=e.originalEvent,n=t.currentTarget;switch(t.which){case 40:var r=V(n);r&&r.focus(),t.preventDefault();break;case 38:var l=G(n);l&&l.focus(),t.preventDefault();break;case 13:case 32:q(e),t.preventDefault();break;case 27:_(),a.DomHandler.focus(x.current)}},in:I,onEnter:function(e){var t;a.ZIndexUtils.set("overlay",w.current,s&&s.autoZIndex||O.default.autoZIndex,s&&s.zIndex.overlay||O.default.zIndex.overlay),B(),(t=a.DomHandler.findSingle(w.current,"li.p-highlight"))&&t.scrollIntoView&&t.scrollIntoView({block:"nearest",inline:"nearest"}),e&&e()},onEntered:function(e){e&&e(),R(),p.onShow&&p.onShow()},onExit:function(){H()},onExited:function(){p.filter&&p.resetFilterOnHide&&J(),a.ZIndexUtils.clear(w.current),p.onHide&&p.onHide()},ptm:T}))),me&&h.createElement(c.Tooltip,E({target:j,content:p.tooltip},p.tooltipOptions,{pt:T("tooltip")})))})));te.displayName="MultiSelect",exports.MultiSelect=te;
