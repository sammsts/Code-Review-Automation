import*as e from"react";import{useMountEffect as n,useUpdateEffect as t,useUnmountEffect as r}from"primereact/hooks";import{Portal as o}from"primereact/portal";import{DomHandler as l,ZIndexUtils as a,classNames as c,mergeProps as u,ObjectUtils as i}from"primereact/utils";import{ComponentBase as d}from"primereact/componentbase";import m,{PrimeReactContext as f}from"primereact/api";function s(e){if(Array.isArray(e))return e}function p(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,l,a,c=[],u=!0,i=!1;try{if(l=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;u=!1}else for(;!(u=(r=l.call(t)).done)&&(c.push(r.value),c.length!==n);u=!0);}catch(e){i=!0,o=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(i)throw o}}return c}}function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function b(e,n){if(e){if("string"==typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,n):void 0}}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var k=d.extend({defaultProps:{__TYPE:"BlockUI",autoZIndex:!0,baseZIndex:0,blocked:!1,className:null,containerClassName:null,containerStyle:null,fullScreen:!1,id:null,onBlocked:null,onUnblocked:null,style:null,template:null,children:void 0}}),h=e.forwardRef((function(d,y){var h,S,I=e.useContext(f),x=k.getProps(d,I),g=e.useState(x.blocked),E=(S=2,s(h=g)||p(h,S)||b(h,S)||v()),w=E[0],C=E[1],N=e.useRef(null),A=e.useRef(null),U=k.setMetaData({props:x}).ptm,Z=function(){C(!0)},j=function(){var e=function(){C(!1),x.fullScreen&&l.removeClass(document.body,"p-overflow-hidden"),x.onUnblocked&&x.onUnblocked()};A.current?(l.addClass(A.current,"p-component-overlay-leave"),A.current.addEventListener("animationend",(function(){a.clear(A.current),e()}))):e()},B=function(){if(x.fullScreen&&(l.addClass(document.body,"p-overflow-hidden"),document.activeElement.blur()),x.autoZIndex){var e=x.fullScreen?"modal":"overlay";a.set(e,A.current,I&&I.autoZIndex||m.autoZIndex,x.baseZIndex||I&&I.zIndex[e]||m.zIndex[e])}x.onBlocked&&x.onBlocked()};n((function(){w&&Z()})),t((function(){x.blocked?Z():j()}),[x.blocked]),r((function(){x.fullScreen&&l.removeClass(document.body,"p-overflow-hidden"),a.clear(A.current)})),e.useImperativeHandle(y,(function(){return{props:x,block:Z,unblock:j,getElement:function(){return N.current}}}));var O=function(){if(w){var n=x.fullScreen?document.body:"self",t=c("p-blockui p-component-overlay p-component-overlay-enter",{"p-blockui-document":x.fullScreen},x.className),r=x.template?i.getJSXElement(x.template,x):null;return e.createElement(o,{element:e.createElement("div",{ref:A,className:t,style:x.style},r),appendTo:n,onMounted:B})}return null}(),P=c("p-blockui-container",x.containerClassName),M=u({id:x.id,ref:N,style:x.containerStyle,className:P},k.getOtherProps(x),U("root"));return e.createElement("div",M,x.children,O)}));h.displayName="BlockUI";export{h as BlockUI};
