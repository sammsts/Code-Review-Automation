"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),r=require("primereact/componentbase"),n=require("primereact/utils"),l=require("primereact/hooks"),o=require("primereact/icons/arrowdown"),a=require("primereact/icons/arrowup"),i=require("primereact/icons/spinner"),c=require("primereact/paginator"),u=require("primereact/ripple"),s=require("primereact/overlayservice"),p=require("primereact/icons/chevrondown"),d=require("primereact/icons/chevronright"),f=require("primereact/icons/check"),m=require("primereact/icons/minus"),g=require("primereact/inputtext"),b=require("primereact/tooltip"),y=require("primereact/icons/sortalt"),h=require("primereact/icons/sortamountdown"),v=require("primereact/icons/sortamountupalt");function C(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function S(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var w=S(e),E=C(t);function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function P(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function O(e){var t=P(e,"string");return"symbol"===k(t)?t:String(t)}function M(e,t,r){return(t=O(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e){if(Array.isArray(e))return D(e)}function N(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function R(e,t){if(e){if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e){return I(e)||N(e)||R(e)||T()}function K(e){if(Array.isArray(e))return e}function U(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,l,o,a,i=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw l}}return i}}function F(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function H(e,t){return K(e)||U(e,t)||R(e,t)||F()}var z=r.ComponentBase.extend({defaultProps:{__TYPE:"Column",align:null,alignFrozen:"left",alignHeader:null,body:null,bodyClassName:null,bodyStyle:null,cellEditValidator:null,cellEditValidatorEvent:"click",className:null,colSpan:null,columnKey:null,dataType:"text",editor:null,excludeGlobalFilter:!1,expander:!1,exportField:null,exportable:!0,field:null,filter:!1,filterApply:null,filterClear:null,filterElement:null,filterField:null,filterFooter:null,filterFunction:null,filterHeader:null,filterHeaderClassName:null,filterHeaderStyle:null,filterMatchMode:null,filterMatchModeOptions:null,filterMaxLength:null,filterMenuClassName:null,filterMenuStyle:null,filterPlaceholder:null,filterType:"text",footer:null,footerClassName:null,footerStyle:null,frozen:!1,header:null,headerClassName:null,headerStyle:null,headerTooltip:null,headerTooltipOptions:null,hidden:!1,maxConstraints:2,onBeforeCellEditHide:null,onBeforeCellEditShow:null,onCellEditCancel:null,onCellEditComplete:null,onCellEditInit:null,onFilterApplyClick:null,onFilterClear:null,onFilterConstraintAdd:null,onFilterConstraintRemove:null,onFilterMatchModeChange:null,onFilterOperatorChange:null,reorderable:!0,resizeable:!0,rowEditor:!1,rowReorder:!1,rowReorderIcon:null,rowSpan:null,selectionMode:null,showAddButton:!0,showApplyButton:!0,showClearButton:!0,showFilterMatchModes:!0,showFilterMenu:!0,showFilterMenuOptions:!0,showFilterOperator:!0,sortField:null,sortFunction:null,sortable:!1,sortableDisabled:!1,style:null,children:void 0},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,z.defaultProps)},getCProps:function(e){return n.ObjectUtils.getComponentProps(e,z.defaultProps)},getCOtherProps:function(e){return n.ObjectUtils.getComponentDiffProps(e,z.defaultProps)}}),A=r.ComponentBase.extend({defaultProps:{__TYPE:"TreeTable",alwaysShowPaginator:!0,checkboxIcon:null,className:null,columnResizeMode:"fit",contextMenuSelectionKey:null,currentPageReportTemplate:"({currentPage} of {totalPages})",defaultSortOrder:1,emptyMessage:null,expandedKeys:null,filterDelay:300,filterLocale:void 0,filterMode:"lenient",filters:null,first:null,footer:null,footerColumnGroup:null,frozenFooterColumnGroup:null,frozenHeaderColumnGroup:null,frozenWidth:null,globalFilter:null,globalFilterMatchMode:t.FilterMatchMode.CONTAINS,header:null,headerColumnGroup:null,id:null,lazy:!1,loading:!1,loadingIcon:null,metaKeySelection:!0,multiSortMeta:null,onColReorder:null,onCollapse:null,onColumnResizeEnd:null,onContextMenu:null,onContextMenuSelectionChange:null,onExpand:null,onFilter:null,onPage:null,onRowClick:null,onRowMouseEnter:null,onRowMouseLeave:null,onSelect:null,onSelectionChange:null,onSort:null,onToggle:null,onUnselect:null,pageLinkSize:5,paginator:!1,paginatorClassName:null,paginatorDropdownAppendTo:null,paginatorLeft:null,paginatorPosition:"bottom",paginatorRight:null,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",propagateSelectionDown:!0,propagateSelectionUp:!0,removableSort:!1,reorderableColumns:!1,reorderIndicatorDownIcon:null,reorderIndicatorUpIcon:null,resizableColumns:!1,rowClassName:null,rowHover:!1,rows:null,rowsPerPageOptions:null,scrollHeight:null,scrollable:!1,selectOnEdit:!0,selectionKeys:null,selectionMode:null,showGridlines:!1,sortField:null,sortMode:"single",sortIcon:null,sortOrder:null,stripedRows:!1,style:null,tabIndex:0,tableClassName:null,tableStyle:null,totalRecords:null,value:null,children:void 0}}),L=function(e){var t=H(w.useState(!1),2),r=t[0],o=t[1],a=w.useRef(null),i=w.useRef(null),c=w.useRef(!1),u=w.useRef(null),p=w.useRef(null),d=function(t){var n=z.getCProps(e.column);return e.ptCallbacks.ptmo(z.getCProp(e.column,"pt"),t,{props:n,parent:e.metaData,state:{editing:r}})},f=H(l.useEventListener({type:"click",listener:function(e){!c.current&&y(e.target)&&v(e),c.current=!1}}),2),m=f[0],g=f[1],b=function(){e.editor&&!r&&(e.selectOnEdit||!e.selectOnEdit&&e.selected)&&(c.current=!0,o(!0),m(),u.current=function(e){y(e.target)||(c.current=!0)},s.OverlayService.on("overlay-click",u.current))},y=function(e){return a.current&&!(a.current.isSameNode(e)||a.current.contains(e))},h=function(){setTimeout((function(){o(!1),g(),s.OverlayService.off("overlay-click",u.current),u.current=null}),1)},v=function(t){e.cellEditValidator?e.cellEditValidator({originalEvent:t,columnProps:e})&&h():h()};w.useEffect((function(){if(a.current&&e.editor)if(clearTimeout(p.current),r){var t=n.DomHandler.findSingle(a.current,"input");t&&document.activeElement!==t&&!t.hasAttribute("data-isCellEditing")&&(t.setAttribute("data-isCellEditing",!0),t.focus()),i.current.tabIndex=-1}else p.current=setTimeout((function(){i.current&&i.current.setAttribute("tabindex",0)}),50)})),l.useUnmountEffect((function(){u.current&&(s.OverlayService.off("overlay-click",u.current),u.current=null)}));var C,S=n.ObjectUtils.getPropValue(e.bodyClassName,e.node.data,{field:e.field,rowIndex:e.rowIndex,props:e}),E=n.classNames(S||e.className,{"p-editable-column":e.editor,"p-cell-editing":!!e.editor&&r}),x=e.bodyStyle||e.style;if(r){if(!e.editor)throw new Error("Editor is not found on column.");C=n.ObjectUtils.getJSXElement(e.editor,{node:e.node,rowData:e.node.data,value:n.ObjectUtils.resolveFieldData(e.node.data,e.field),field:e.field,rowIndex:e.rowIndex,props:e})}else C=e.body?n.ObjectUtils.getJSXElement(e.body,e.node,{field:e.field,rowIndex:e.rowIndex,props:e}):n.ObjectUtils.resolveFieldData(e.node.data,e.field);var k=n.mergeProps({tabIndex:0,ref:i,className:"p-cell-editor-key-helper p-hidden-accessible",onFocus:function(e){b()}},d("editorKeyHelperLabel")),P=n.mergeProps(d("editorKeyHelper")),O=e.editor&&w.createElement("a",k,w.createElement("span",P)),M=n.mergeProps({ref:a,className:E,style:x,onClick:function(e){return b()},onKeyDown:function(e){var t;13!==(t=e).which&&9!==t.which||v(t)}},d("bodyCell"),d("root"));return w.createElement("td",M,e.children,O,C)};function W(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=q(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function q(e,t){if(e){if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}L.displayName="TreeTableBodyCell";var X=w.memo((function(e){var r=w.useRef(null),l=w.useRef(null),o=w.useRef(null),a=w.useRef(!1),i=!!e.expandedKeys&&void 0!==e.expandedKeys[e.node.key],c=function(e){return z.getCProps(e)},s=function(t,r){return e.ptCallbacks.ptmo(z.getCProp(t,"pt"),r,{props:c(t),parent:e.metaData})},g=function(t,r){return e.ptCallbacks.ptmo(z.getCProp(t,"pt"),r,{props:c(t),parent:e.metaData,context:{checked:D(),partialChecked:I()}})},b=function(e,t){return z.getCProp(e,t)},y=function(e){i?v(e):h(e),e.preventDefault(),e.stopPropagation()},h=function(t){var r=e.expandedKeys?_({},e.expandedKeys):{};r[e.node.key]=!0,e.onToggle({originalEvent:t,value:r}),C(t,!0)},v=function(t){var r=_({},e.expandedKeys);delete r[e.node.key],e.onToggle({originalEvent:t,value:r}),C(t,!1)},C=function(t,r){r?e.onExpand&&e.onExpand({originalEvent:t,node:e.node}):e.onCollapse&&e.onCollapse({originalEvent:t,node:e.node})},S=function(t){e.onRowClick&&e.onRowClick(t,e.node),a.current=!1},E=function(t){var r=D(),l=e.selectionKeys?_({},e.selectionKeys):{};r?(e.propagateSelectionDown?P(e.node,!1,l):delete l[e.node.key],e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:t,check:!1,selectionKeys:l}),e.onUnselect&&e.onUnselect({originalEvent:t,node:e.node})):(e.propagateSelectionDown?P(e.node,!0,l):l[e.node.key]={checked:!0},e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp({originalEvent:t,check:!0,selectionKeys:l}),e.onSelect&&e.onSelect({originalEvent:t,node:e.node})),e.onSelectionChange&&e.onSelectionChange({originalEvent:t,value:l}),n.DomHandler.clearSelection()},k=function(t){var r,n=t.check,l=t.selectionKeys,o=0,a=!1,i=W(e.node.children);try{for(i.s();!(r=i.n()).done;){var c=r.value;l[c.key]&&l[c.key].checked?o++:l[c.key]&&l[c.key].partialChecked&&(a=!0)}}catch(e){i.e(e)}finally{i.f()}n&&o===e.node.children.length?l[e.node.key]={checked:!0,partialChecked:!1}:(n||delete l[e.node.key],l[e.node.key]=a||o>0&&o!==e.node.children.length?{checked:!1,partialChecked:!0}:{checked:!1,partialChecked:!1}),e.propagateSelectionUp&&e.onPropagateUp&&e.onPropagateUp(t)},P=function e(t,r,n){if(r?n[t.key]={checked:!0,partialChecked:!1}:delete n[t.key],t.children&&t.children.length)for(var l=0;l<t.children.length;l++)e(t.children[l],r,n)},O=function(e){if(e.target===r.current){var t=e.currentTarget;switch(e.which){case 40:var n=t.nextElementSibling;n&&n.focus(),e.preventDefault();break;case 38:var l=t.previousElementSibling;l&&l.focus(),e.preventDefault();break;case 39:i||h(e),e.preventDefault();break;case 37:i&&v(e),e.preventDefault();break;case 13:S(e),e.preventDefault()}}},M=function(){return!("single"!==e.selectionMode&&"multiple"!==e.selectionMode||!e.selectionKeys)&&("single"===e.selectionMode?e.selectionKeys===e.node.key:void 0!==e.selectionKeys[e.node.key])},D=function(){return!!e.selectionKeys&&(e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].checked)},I=function(){return!!e.selectionKeys&&(e.selectionKeys[e.node.key]&&e.selectionKeys[e.node.key].partialChecked)},N=function(r){var l=t.ariaLabel(i?"collapseLabel":"expandLabel"),o=n.mergeProps({className:"p-treetable-toggler-icon","aria-hidden":!0},s(r,"rowTogglerIcon")),a=n.IconUtils.getJSXIcon(e.togglerIcon||w.createElement(i?p.ChevronDownIcon:d.ChevronRightIcon,o),_({},o),{props:e}),c={marginLeft:16*e.level+"px",visibility:!1===e.node.leaf||e.node.children&&e.node.children.length?"visible":"hidden"},f=n.mergeProps({type:"button",className:"p-treetable-toggler p-link p-unselectable-text",onClick:function(e){return y(e)},tabIndex:-1,style:c,"aria-label":l},s(r,"rowToggler")),m=w.createElement("button",f,a,w.createElement(u.Ripple,null));e.togglerTemplate&&(m=n.ObjectUtils.getJSXElement(e.togglerTemplate,e.node,{onClick:y,containerClassName:"p-treetable-toggler p-link",iconClassName:"p-treetable-toggler-icon",element:m,props:e,expanded:i,buttonStyle:c}));return m},R=function(t){if("checkbox"===e.selectionMode&&!1!==e.node.selectable){var r=D(),a=I(),i=n.classNames("p-checkbox-box",{"p-highlight":r,"p-indeterminate":a}),c="p-checkbox-icon p-c",u=n.mergeProps({className:c},g(t,"checkboxIcon")),s=n.IconUtils.getJSXIcon(r?e.checkboxIcon||w.createElement(f.CheckIcon,u):a?e.checkboxIcon||w.createElement(m.MinusIcon,u):null,{className:c},{props:e,checked:r,partialChecked:a}),p=n.mergeProps({type:"checkbox",onFocus:function(e){return n.DomHandler.addClass(o.current,"p-focus"),void n.DomHandler.addClass(l.current,"p-checkbox-focused")},onBlur:function(e){return n.DomHandler.removeClass(o.current,"p-focus"),void n.DomHandler.removeClass(l.current,"p-checkbox-focused")}},g(t,"hiddenInput")),d=n.mergeProps({className:"p-checkbox p-treetable-checkbox p-component",ref:l,onClick:function(e){return E(e)},role:"checkbox","aria-checked":r},g(t,"checkboxWrapper")),b=n.mergeProps({className:"p-hidden-accessible"},g(t,"hiddenInputWrapper")),y=n.mergeProps({className:i,ref:o},g(t,"checkbox"));return w.createElement("div",d,w.createElement("div",b,w.createElement("input",p)),w.createElement("div",y,s))}return null},T=e.columns.map((function(t,r){var n,l;return b(t,"expander")&&(n=N(t),l=R(t)),w.createElement(L,x({key:"".concat(b(t,"columnKey")||b(t,"field"),"_").concat(r)},z.getCProps(t),{column:t,selectOnEdit:e.selectOnEdit,selected:M(),node:e.node,rowIndex:e.rowIndex,ptCallbacks:e.ptCallbacks,metaData:e.metaData}),n,l)})),j=i&&e.node.children?e.node.children.map((function(t,r){return w.createElement(X,{key:"".concat(t.key||JSON.stringify(t.data),"_").concat(r),level:e.level+1,rowIndex:e.rowIndex+"_"+r,node:t,checkboxIcon:e.checkboxIcon,columns:e.columns,expandedKeys:e.expandedKeys,selectOnEdit:e.selectOnEdit,onToggle:e.onToggle,togglerTemplate:e.togglerTemplate,onExpand:e.onExpand,onCollapse:e.onCollapse,selectionMode:e.selectionMode,selectionKeys:e.selectionKeys,onSelectionChange:e.onSelectionChange,metaKeySelection:e.metaKeySelection,onRowClick:e.onRowClick,onRowMouseEnter:e.onRowMouseEnter,onRowMouseLeave:e.onRowMouseLeave,onSelect:e.onSelect,onUnselect:e.onUnselect,propagateSelectionUp:e.propagateSelectionUp,propagateSelectionDown:e.propagateSelectionDown,onPropagateUp:k,rowClassName:e.rowClassName,contextMenuSelectionKey:e.contextMenuSelectionKey,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onContextMenu:e.onContextMenu,ptCallbacks:e.ptCallbacks,metaData:e.metaData})})):null,K={"p-highlight":M(),"p-highlight-contextmenu":e.contextMenuSelectionKey&&e.contextMenuSelectionKey===e.node.key,"p-row-odd":e.rowIndex%2!=0};if(e.rowClassName){var U=e.rowClassName(e.node);K=_(_({},K),U)}K=n.classNames(K,e.node.className);var F=n.mergeProps({ref:r,tabIndex:0,className:K,style:e.node.style,onClick:function(e){return S(e)},onTouchEnd:function(e){a.current=!0},onContextMenu:function(t){return r=t,n.DomHandler.clearSelection(),e.onContextMenuSelectionChange&&e.onContextMenuSelectionChange({originalEvent:r,value:e.node.key}),void(e.onContextMenu&&e.onContextMenu({originalEvent:r,node:e.node}));var r},onKeyDown:function(e){return O(e)},onMouseEnter:function(t){return r=t,void(e.onRowMouseEnter&&e.onRowMouseEnter({originalEvent:r,node:e.node,index:e.rowIndex}));var r},onMouseLeave:function(t){return r=t,void(e.onRowMouseLeave&&e.onRowMouseLeave({originalEvent:r,node:e.node,index:e.rowIndex}));var r}},e.ptCallbacks.ptm("row"));return w.createElement(w.Fragment,null,w.createElement("tr",F,T),j)}));function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=$(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function $(e,t){if(e){if("string"==typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}X.displayName="TreeTableRow";var Z=w.memo((function(e){var r="single"===e.selectionMode,l="multiple"===e.selectionMode,o=function t(r){var n,l=[],o=Y(r=r||e.value);try{for(o.s();!(n=o.n()).done;){var i=n.value;l.push(i.key),a(i.key)&&(l=l.concat(t(i.children)))}}catch(e){o.e(e)}finally{o.f()}return l},a=function(t){return e.expandedKeys&&!!e.expandedKeys[t]},i=function(t,a){e.onRowClick&&e.onRowClick({originalEvent:t,node:a});var i=t.target.nodeName;if("INPUT"!==i&&"BUTTON"!==i&&"A"!==i&&!n.DomHandler.hasClass(t.target,"p-clickable")&&(r||l)&&!1!==a.selectable){var u,s=c(a),p=e.metaKeySelection,d=o(),f=d.findIndex((function(e){return e===a.key}));if(l&&t.shiftKey){n.DomHandler.clearSelection();var m=d.findIndex((function(t){return e.selectionKeys[t]})),g=Math.min(f,m),b=Math.max(f,m);u=V({},e.selectionKeys);for(var y=g;y<=b;y++){u[d[y]]=!0}}else if(p){var h=t.metaKey||t.ctrlKey;s&&h?(r?u=null:delete(u=V({},e.selectionKeys))[a.key],e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):(r?u=a.key:l&&((u=h&&e.selectionKeys?V({},e.selectionKeys):{})[a.key]=!0),e.onSelect&&e.onSelect({originalEvent:t,node:a}))}else r?s?(u=null,e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):(u=a.key,e.onSelect&&e.onSelect({originalEvent:t,node:a})):s?(delete(u=V({},e.selectionKeys))[a.key],e.onUnselect&&e.onUnselect({originalEvent:t,node:a})):((u=e.selectionKeys?V({},e.selectionKeys):{})[a.key]=!0,e.onSelect&&e.onSelect({originalEvent:t,node:a}));e.onSelectionChange&&e.onSelectionChange({originalEvent:t,value:u})}},c=function(t){return!(!r&&!l||!e.selectionKeys)&&(r?e.selectionKeys===t.key:void 0!==e.selectionKeys[t.key])},u=function(t,r){return w.createElement(X,{key:"".concat(t.key||JSON.stringify(t.data),"_").concat(r),level:0,rowIndex:r,selectOnEdit:e.selectOnEdit,node:t,checkboxIcon:e.checkboxIcon,columns:e.columns,expandedKeys:e.expandedKeys,onToggle:e.onToggle,togglerTemplate:e.togglerTemplate,onExpand:e.onExpand,onCollapse:e.onCollapse,selectionMode:e.selectionMode,selectionKeys:e.selectionKeys,onSelectionChange:e.onSelectionChange,metaKeySelection:e.metaKeySelection,onRowClick:i,onRowMouseEnter:e.onRowMouseEnter,onRowMouseLeave:e.onRowMouseLeave,onSelect:e.onSelect,onUnselect:e.onUnselect,propagateSelectionUp:e.propagateSelectionUp,propagateSelectionDown:e.propagateSelectionDown,rowClassName:e.rowClassName,contextMenuSelectionKey:e.contextMenuSelectionKey,onContextMenuSelectionChange:e.onContextMenuSelectionChange,onContextMenu:e.onContextMenu,ptCallbacks:e.ptCallbacks,metaData:e.metaData})},s=e.value&&e.value.length?function(){if(e.paginator&&!e.lazy){for(var t=e.first||0,r=t+(e.rows||0),n=[],l=t;l<r;l++){if(!e.value[l])break;n.push(u(e.value[l]))}return n}return e.value.map(u)}():function(){if(e.loading)return null;var r=e.columns?e.columns.length:null,l=e.emptyMessage||t.localeOption("emptyMessage"),o=n.mergeProps({className:"p-treetable-emptymessage"},e.ptCallbacks.ptm("emptyMessage")),a=n.mergeProps({colSpan:r},e.ptCallbacks.ptm("bodyCell"));return w.createElement("tr",o,w.createElement("td",a,l))}(),p=n.mergeProps({className:"p-treetable-tbody"},e.ptCallbacks.ptm("tbody"));return w.createElement("tbody",p,s)}));Z.displayName="TreeTableBody";var ee=r.ComponentBase.extend({defaultProps:{__TYPE:"ColumnGroup",children:void 0},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,ee.defaultProps)},getCProps:function(e){return n.ObjectUtils.getComponentProps(e,ee.defaultProps)}}),te=r.ComponentBase.extend({defaultProps:{__TYPE:"Row",style:null,className:null,children:void 0},getCProp:function(e,t){return n.ObjectUtils.getComponentProp(e,t,te.defaultProps)}}),re=w.memo((function(e){var t=function(e,t){return z.getCProp(e,t)},r=function(t){return e.ptCallbacks.ptmo(z.getCProps(t))},l=function(n,l){return e.ptCallbacks.ptmo(t(n,"pt"),l,{props:r(n),parent:e.metaData})},o=function(e,r){var o=n.mergeProps({key:e.field||r,className:t(e,"footerClassName")||t(e,"className"),style:t(e,"footerStyle")||t(e,"style"),rowSpan:t(e,"rowSpan"),colSpan:t(e,"colSpan")},l(e,"footerCell"));return w.createElement("td",o,t(e,"footer"))},a=function(t,r){var l=w.Children.toArray(te.getCProp(t,"children")).map(o),a=n.mergeProps(e.ptCallbacks.ptm("footerRow"));return w.createElement("tr",x({},a,{key:r}),l)},i=e.columnGroup?w.Children.toArray(ee.getCProp(e.columnGroup,"children")).map(a):function(t){if(t){var r=t.map(o),l=n.mergeProps(e.ptCallbacks.ptm("footerRow"));return w.createElement("tr",l,r)}return null}(e.columns);if(function(){if(e.columnGroup)return!0;for(var r=0;r<e.columns.length;r++)if(t(e.columns[r],"footer"))return!0;return!1}()){var c=n.mergeProps({className:"p-treetable-tfoot"},e.ptCallbacks.ptm("tfoot"));return w.createElement("tfoot",c,i)}return null}));function ne(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=le(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function le(e,t){if(e){if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}re.displayName="TreeTableFooter";var ae=w.memo((function(e){var t=w.useRef(null),r=function(t){return e.ptCallbacks.ptmo(z.getCProps(t))},l=function(t,n){return e.ptCallbacks.ptmo(z.getCProp(t,"pt"),n,{props:r(t),parent:e.metaData})},o=function(t,r){if(E(r,"sortable")){var l=t.target;(n.DomHandler.hasClass(l,"p-sortable-column")||n.DomHandler.hasClass(l,"p-column-title")||n.DomHandler.hasClass(l,"p-sortable-column-icon")||n.DomHandler.hasClass(l.parentElement,"p-sortable-column-icon"))&&(e.onSort({originalEvent:t,sortField:E(r,"sortField")||E(r,"field"),sortFunction:E(r,"sortFunction"),sortable:E(r,"sortable")}),n.DomHandler.clearSelection())}},a=function(t,r){e.reorderableColumns&&E(r,"reorderable")&&("INPUT"!==t.target.nodeName?t.currentTarget.draggable=!0:"INPUT"===t.target.nodeName&&(t.currentTarget.draggable=!1))},i=function(e,t){"Enter"===e.key&&(o(e,t),e.preventDefault())},c=function(t){if(e.multiSortMeta)for(var r=0;r<e.multiSortMeta.length;r++)if(e.multiSortMeta[r].field===E(t,"field"))return r;return-1},u=function(t,r){e.resizableColumns&&e.onResizeStart&&e.onResizeStart({originalEvent:t,columnEl:t.target.parentElement,column:r})},s=function(t,r){e.onDragStart&&e.onDragStart({originalEvent:t,column:r})},p=function(t,r){e.onDragOver&&e.onDragOver({originalEvent:t,column:r})},d=function(t,r){e.onDragLeave&&e.onDragLeave({originalEvent:t,column:r})},f=function(t,r){e.onDrop&&e.onDrop({originalEvent:t,column:r})},m=function(r,n){if(E(n,"filter")&&e.onFilter){t.current&&clearTimeout(t.current);var l=r.target.value;t.current=setTimeout((function(){e.onFilter({value:l,field:E(n,"field"),matchMode:E(n,"filterMatchMode")||"startsWith"}),t.current=null}),e.filterDelay)}},C=function(e){if(e){var t,r=ne(e);try{for(r.s();!(t=r.n()).done;){if(E(t.value,"filter"))return!0}}catch(e){r.e(e)}finally{r.f()}}return!1},S=function(e,t,r){return E(e,"sortable")?t&&r<0?"descending":t&&r>0?"ascending":"none":null},E=function(e){return e?"string"==typeof(arguments.length<=1?void 0:arguments[1])?z.getCProp(e,arguments.length<=1?void 0:arguments[1]):z.getCProp((arguments.length<=1?void 0:arguments[1])||e,arguments.length<=2?void 0:arguments[2]):null},k=function(t,r,o){if(E(t,"sortable")){var a="p-sortable-column-icon",i=n.mergeProps({className:a},l(t,"sortIcon"));return n.IconUtils.getJSXIcon(e.sortIcon||w.createElement(r?o<0?h.SortAmountDownIcon:v.SortAmountUpAltIcon:y.SortAltIcon,i),{className:a},{props:e,sorted:r,sortOrder:o})}return null},P=function(t){if(e.resizableColumns){var r=n.mergeProps({className:"p-column-resizer p-clickable",onMouseDown:function(e){return u(e,t)}},l(t,"columnResizer"));return w.createElement("span",r)}return null},O=function(t,r){if(-1!==r&&e.multiSortMeta&&e.multiSortMeta.length>1){var o=n.mergeProps({className:"p-sortable-column-badge"},l(t,"sortBadge"));return w.createElement("span",o,r+1)}return null},M=function(e,t){var r=n.ObjectUtils.getJSXElement(E(e,"header"),{props:t}),o=n.mergeProps({className:"p-column-title"},l(e,"headerTitle"));return w.createElement("span",o,r)},D=function(t,r){var u;if(E(t,"filter")&&r.renderFilter&&(u=E(t,"filterElement")||w.createElement(g.InputText,{onInput:function(e){return m(e,t)},type:e.filterType,defaultValue:e.filters&&e.filters[E(t,"field")]?e.filters[E(t,"field")].value:null,className:"p-column-filter",placeholder:E(t,"filterPlaceholder"),maxLength:E(t,"filterMaxLength"),pt:l(t,"filterInput")})),r.filterOnly){var y=n.mergeProps({key:E(t,"columnKey")||E(t,"field")||r.index,className:n.classNames("p-filter-column",E(t,"filterHeaderClassName")),style:E(t,"filterHeaderStyle")||E(t,"style"),rowSpan:E(t,"rowSpan"),colSpan:E(t,"colSpan")},l(t,"headerCell"),l(t,"root"));return w.createElement("th",y,u)}var h=w.createRef(null),v=c(t),C=-1!==v?e.multiSortMeta[v]:null,D=E(t,"field")===e.sortField,I=null!==C,N=E(t,"sortable")&&(D||I),R=0;D?R=e.sortOrder:I&&(R=C.order);var T=k(t,N,R),j=S(t,N,R),K=O(t,v),U=n.classNames(E(t,"headerClassName")||E(t,"className"),{"p-sortable-column":E(t,"sortable"),"p-highlight":N,"p-resizable-column":e.resizableColumns&&E(t,"resizeable")}),F=E(t,"headerTooltip"),H=n.ObjectUtils.isNotEmpty(F),z=M(t,r),A=P(t),L=n.mergeProps({ref:h,className:U,style:E(t,"headerStyle")||E(t,"style"),tabIndex:E(t,"sortable")?e.tabIndex:null,onClick:function(e){return o(e,t)},onMouseDown:function(e){return a(e,t)},onKeyDown:function(e){return i(e,t)},rowSpan:E(t,"rowSpan"),colSpan:E(t,"colSpan"),"aria-sort":j,onDragStart:function(e){return s(e,t)},onDragOver:function(e){return p(e,t)},onDragLeave:function(e){return d(e,t)},onDrop:function(e){return f(e,t)}},l(t,"headerCell"),l(t,"root"));return w.createElement(w.Fragment,{key:t.columnKey||t.field||r.index},w.createElement("th",L,A,z,T,K,u),H&&w.createElement(b.Tooltip,x({target:h,content:F},E(t,"headerTooltipOptions"))))},I=function(t,r){var l=w.Children.toArray(te.getCProp(t,"children")).map((function(e,t){return D(e,{index:t,filterOnly:!1,renderFilter:!0})})),o=n.mergeProps(e.ptCallbacks.ptm("headerRow"));return w.createElement("tr",x({},o,{key:r}),l)},N=e.columnGroup?w.Children.toArray(ee.getCProp(e.columnGroup,"children")).map(I):function(t){if(t){var r=n.mergeProps(e.ptCallbacks.ptm("headerRow"));return C(t)?w.createElement(w.Fragment,null,w.createElement("tr",r,t.map((function(e,t){return D(e,{index:t,filterOnly:!1,renderFilter:!1})}))),w.createElement("tr",r,t.map((function(e,t){return D(e,{index:t,filterOnly:!0,renderFilter:!0})})))):w.createElement("tr",r,t.map((function(e,t){return D(e,{index:t,filterOnly:!1,renderFilter:!1})})))}return null}(e.columns),R=n.mergeProps({className:"p-treetable-thead"},e.ptCallbacks.ptm("thead"));return w.createElement("thead",R,N)}));ae.displayName="TreeTableHeader";var ie=w.memo((function(e){var t=w.useRef(null),r=w.useRef(null),o=w.useRef(null),a=w.useRef(null),i=w.useRef(null),c=w.useRef(null),u=w.useRef(null),s=function(){if(e.scrollHeight)if(-1!==e.scrollHeight.indexOf("%")){var r=p(t.current);a.current.style.visibility="hidden",a.current.style.height="100px";var l=n.DomHandler.getOuterHeight(r),o=n.DomHandler.getOuterHeight(r.parentElement)*parseInt(e.scrollHeight,10)/100-(l-100);a.current.style.height="auto",a.current.style.maxHeight=o+"px",a.current.style.visibility="visible"}else a.current.style.maxHeight=e.scrollHeight},p=function(e){if(e){for(var t=e;t&&!n.DomHandler.hasClass(t,"p-treetable");)t=t.parentElement;return t}return null};l.useMountEffect((function(){if(e.frozen)a.current.style.paddingBottom=n.DomHandler.calculateScrollbarWidth()+"px";else{var t=n.DomHandler.calculateScrollbarWidth();o.current.style.marginRight=t+"px",u.current&&(u.current.style.marginRight=t+"px")}})),w.useEffect((function(){s()}));var d=n.classNames("p-treetable-scrollable-view",{"p-treetable-frozen-view":e.frozen,"p-treetable-unfrozen-view":!e.frozen&&e.frozenWidth}),f=e.frozen?e.frozenWidth:"calc(100% - "+e.frozenWidth+")",m=e.frozen?null:e.frozenWidth,g=function(){if(n.ObjectUtils.isNotEmpty(e.columns)){var t=e.columns.map((function(e,t){return w.createElement("col",{key:e.field+"_"+t})})),r=n.mergeProps({className:"p-treetable-scrollable-colgroup"},e.ptCallbacks.ptm("scrollableColgroup"));return w.createElement("colgroup",r,t)}return null}(),b=!e.frozen&&e.scrollHeight?{overflowY:"scroll"}:null,y=n.mergeProps({className:d,style:{width:f,left:m},ref:t},e.ptCallbacks.ptm("scrollable")),h=n.mergeProps({className:"p-treetable-scrollable-header",ref:r,onScroll:function(e){r.current.scrollLeft=0}},e.ptCallbacks.ptm("scrollableHeader")),v=n.mergeProps({className:"p-treetable-scrollable-header-box",ref:o},e.ptCallbacks.ptm("scrollableHeaderBox")),C=n.mergeProps({className:"p-treetable-scrollable-header-table"},e.ptCallbacks.ptm("scrollableHeaderTable")),S=n.mergeProps({className:"p-treetable-scrollable-body",ref:a,style:b,onScroll:function(e){return(l=t.current.previousElementSibling)&&(r=n.DomHandler.findSingle(l,".p-treetable-scrollable-body")),o.current.style.marginLeft=-1*a.current.scrollLeft+"px",u.current&&(u.current.style.marginLeft=-1*a.current.scrollLeft+"px"),void(r&&(r.scrollTop=a.current.scrollTop));var r,l}},e.ptCallbacks.ptm("scrollableBody")),E=n.mergeProps({ref:i,style:{top:"0"},className:"p-treetable-scrollable-body-table"},e.ptCallbacks.ptm("scrollableBodyTable")),x=n.mergeProps({className:"p-treetable-scrollable-footer",ref:c},e.ptCallbacks.ptm("scrollableFooter")),k=n.mergeProps({className:"p-treetable-scrollable-footer-box",ref:u},e.ptCallbacks.ptm("scrollableFooterBox")),P=n.mergeProps({className:"p-treetable-scrollable-footer-table"},e.ptCallbacks.ptm("scrollableFooterTable"));return w.createElement("div",y,w.createElement("div",h,w.createElement("div",v,w.createElement("table",C,g,e.header))),w.createElement("div",S,w.createElement("table",E,g,e.body)),w.createElement("div",x,w.createElement("div",k,w.createElement("table",P,g,e.footer))))}));function ce(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ue(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function ue(e,t){if(e){if("string"==typeof e)return se(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?se(e,t):void 0}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}ie.displayName="TreeTableScrollableView";var fe=w.forwardRef((function(e,r){var u=w.useContext(t.PrimeReactContext),s=A.getProps(e,u),p=H(w.useState(s.expandedKeys),2),d=p[0],f=p[1],m=H(w.useState(s.first),2),g=m[0],b=m[1],y=H(w.useState(s.rows),2),h=y[0],v=y[1],C=H(w.useState(s.sortField),2),S=C[0],k=C[1],P=H(w.useState(s.sortOrder),2),O=P[0],M=P[1],D=H(w.useState(s.multiSortMeta),2),I=D[0],N=D[1],R=H(w.useState(s.filters),2),T=R[0],K=R[1],U=H(w.useState([]),2),F=U[0],L=U[1],W={props:s,state:{expandedKeys:d,first:g,rows:h,sortField:S,sortOrder:O,multiSortMeta:I,filters:T,columnOrder:F}},q=A.setMetaData(W),G=w.useRef(null),B=w.useRef(null),_=w.useRef(null),X=w.useRef(null),J=w.useRef(null),V=w.useRef(null),Y=w.useRef(null),$=w.useRef(null),Q=w.useRef(0),ee=w.useRef(0),te=w.useRef(0),ne=w.useRef(null),le=w.useRef(null),oe=w.useRef(null),ue=w.useRef(null),se=w.useRef(null),pe=w.useRef(null),me=H(l.useEventListener({type:"mousemove",listener:function(e){V.current&&Ue(e)}}),2),ge=me[0],be=me[1],ye=H(l.useEventListener({type:"mouseup",listener:function(e){V.current&&(V.current=!1,Fe())}}),2),he=ye[0],ve=ye[1],Ce=function(e){s.onToggle?s.onToggle(e):f(e.value)},Se=function(e){s.onPage?s.onPage(e):(b(e.first),v(e.rows))},we=function(e){var t,r,n=e.sortField,l=s.defaultSortOrder;if(ue.current=e.sortable,se.current=e.sortFunction,pe.current=e.sortField,"multiple"===s.sortMode){var o=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if((t=j(Qe()))&&t instanceof Array){var a=t.find((function(e){return e.field===n}));l=a?Ee(a.order):l}var i={field:n,order:l};l?(t&&o||(t=[]),xe(i,t)):s.removableSort&&t&&ke(i,t),r={multiSortMeta:t}}else l=Ye()===n?Ee($e()):l,s.removableSort&&(n=l?n:null),r={sortField:n,sortOrder:l};s.onSort?s.onSort(r):(b(0),k(r.sortField),M(r.sortOrder),N(r.multiSortMeta))},Ee=function(e){return s.removableSort?s.defaultSortOrder===e?-1*e:0:-1*e},xe=function(e,t){for(var r=-1,n=0;n<t.length;n++)if(t[n].field===e.field){r=n;break}r>=0?t[r]=e:t.push(e)},ke=function(e,t){for(var r=-1,n=0;n<t.length;n++)if(t[n].field===e.field){r=n;break}r>=0&&t.splice(r,1),t=t.length>0?t:null},Pe=function(e){return Oe(e)},Oe=function e(t){var r=j(t);if(ue.current&&"custom"===ue.current&&se.current)r=se.current({data:t,field:Ye(),order:$e()});else{r.sort((function(e,t){var r=Ye(),l=n.ObjectUtils.resolveFieldData(e.data,r),o=n.ObjectUtils.resolveFieldData(t.data,r);return Ne(l,o,$e())}));for(var l=0;l<r.length;l++)r[l].children&&r[l].children.length&&(r[l].children=e(r[l].children))}return r},Me=function(e){var t=Qe();return t?De(e,t):e},De=function e(t,r){var n=j(t);n.sort((function(e,t){return Ie(e,t,r,0)}));for(var l=0;l<n.length;l++)n[l].children&&n[l].children.length&&(n[l].children=e(n[l].children,r));return n},Ie=function e(t,r,l,o){var a=n.ObjectUtils.resolveFieldData(t.data,l[o].field),i=n.ObjectUtils.resolveFieldData(r.data,l[o].field);return 0===n.ObjectUtils.compare(a,i,u&&u.locale||E.default.locale)?l.length-1>o?e(t,r,l,o+1):0:Ne(a,i,l[o].order)},Ne=function(e,t,r){return n.ObjectUtils.sort(e,t,r,u&&u.locale||E.default.locale,u&&u.nullSortOrder||E.default.nullSortOrder)},Re=function(e,t,r){Te({value:e,field:t,matchMode:r})},Te=function(e){var t=Ze(),r=t?de({},t):{};je(e.value)?r[e.field]&&delete r[e.field]:r[e.field]={value:e.value,matchMode:e.matchMode},s.onFilter?s.onFilter({filters:r}):(b(0),K(r))},je=function(e){return null==e||("string"==typeof e&&0===e.trim().length||e instanceof Array&&0===e.length)},Ke=function(e){var t=n.DomHandler.getOffset(G.current).left;Y.current=e.columnEl,$.current=e.column,V.current=!0,Q.current=e.originalEvent.pageX-t+G.current.scrollLeft,Ae()},Ue=function(e){var t=n.DomHandler.getOffset(G.current).left;n.DomHandler.addClass(G.current,"p-unselectable-text"),_.current.style.height=G.current.offsetHeight+"px",_.current.style.top="0px",_.current.style.left=e.pageX-t+G.current.scrollLeft+"px",_.current.style.display="block"},Fe=function(e){var t=_.current.offsetLeft-Q.current,r=Y.current.offsetWidth,l=r+t;if(r+t>parseInt(Y.current.style.minWidth||15,10)){if("fit"===s.columnResizeMode){var o=Y.current.nextElementSibling,a=o.offsetWidth-t;if(l>15&&a>15)if(s.scrollable){var i=He(Y.current),c=n.DomHandler.findSingle(i,"table.p-treetable-scrollable-body-table"),u=n.DomHandler.findSingle(i,"table.p-treetable-scrollable-header-table"),p=n.DomHandler.findSingle(i,"table.p-treetable-scrollable-footer-table"),d=n.DomHandler.index(Y.current);ze(u,d,l,a),ze(c,d,l,a),ze(p,d,l,a)}else Y.current.style.width=l+"px",o&&(o.style.width=a+"px")}else if("expand"===s.columnResizeMode)if(s.scrollable){var f=He(Y.current),m=n.DomHandler.findSingle(f,"table.p-treetable-scrollable-body-table"),g=n.DomHandler.findSingle(f,"table.p-treetable-scrollable-header-table"),b=n.DomHandler.findSingle(f,"table.p-treetable-scrollable-footer-table");m.style.width=m.offsetWidth+t+"px",g.style.width=g.offsetWidth+t+"px",b&&(b.style.width=g.offsetWidth+t+"px");var y=n.DomHandler.index(Y.current);ze(g,y,l,null),ze(m,y,l,null),ze(b,y,l,null)}else B.current.style.width=B.current.offsetWidth+t+"px",Y.current.style.width=l+"px";s.onColumnResizeEnd&&s.onColumnResizeEnd({element:Y.current,column:$.current,delta:t})}_.current.style.display="none",Y.current=null,$.current=null,n.DomHandler.removeClass(G.current,"p-unselectable-text"),Le()},He=function(e){if(e){for(var t=e.parentElement;t&&!n.DomHandler.hasClass(t,"p-treetable-scrollable-view");)t=t.parentElement;return t}return null},ze=function(e,t,r,n){if(e){var l="COLGROUP"===e.children[0].nodeName?e.children[0]:null;if(!l)throw new Error("Scrollable tables require a colgroup to support resizable columns");var o=l.children[t],a=o.nextElementSibling;o.style.width=r+"px",a&&n&&(a.style.width=n+"px")}},Ae=function(){ge(),he()},Le=function(){be(),ve()},We=function(e){var t=e.originalEvent,r=e.column;V.current?t.preventDefault():(ee.current=n.DomHandler.getHiddenElementOuterWidth(X.current),te.current=n.DomHandler.getHiddenElementOuterHeight(X.current),ne.current=_e(t.currentTarget),le.current=r,t.dataTransfer.setData("text","b"))},qe=function(e){var t=e.originalEvent,r=_e(t.currentTarget);if(s.reorderableColumns&&ne.current&&r){t.preventDefault();var l=n.DomHandler.getOffset(G.current),o=n.DomHandler.getOffset(r);if(ne.current!==r){var a=o.left-l.left,i=o.left+r.offsetWidth/2;X.current.style.top=o.top-l.top-(te.current-1)+"px",J.current.style.top=o.top-l.top+r.offsetHeight+"px",t.pageX>i?(X.current.style.left=a+r.offsetWidth-Math.ceil(ee.current/2)+"px",J.current.style.left=a+r.offsetWidth-Math.ceil(ee.current/2)+"px",oe.current=1):(X.current.style.left=a-Math.ceil(ee.current/2)+"px",J.current.style.left=a-Math.ceil(ee.current/2)+"px",oe.current=-1),X.current.style.display="block",J.current.style.display="block"}}},Ge=function(e){s.reorderableColumns&&ne.current&&(e.originalEvent.preventDefault(),X.current.style.display="none",J.current.style.display="none")},Be=function(e){var t=e.originalEvent,r=e.column;if(t.preventDefault(),ne.current){var l=n.DomHandler.index(ne.current),o=n.DomHandler.index(_e(t.currentTarget)),a=l!==o;if(a&&(o-l==1&&-1===oe.current||l-o==1&&1===oe.current)&&(a=!1),a){var i=F?tt():w.Children.toArray(s.children),c=function(e,t){return Xe(e,"columnKey")||Xe(t,"columnKey")?n.ObjectUtils.equals(e,t,"props.columnKey"):n.ObjectUtils.equals(e,t,"props.field")},u=i.findIndex((function(e){return c(e,le.current)})),p=i.findIndex((function(e){return c(e,r)}));p<u&&1===oe.current&&p++,p>u&&-1===oe.current&&p--,n.ObjectUtils.reorderArray(i,u,p);var d,f=[],m=ce(i);try{for(m.s();!(d=m.n()).done;){var g=d.value;f.push(Xe(g,"columnKey")||Xe(g,"field"))}}catch(e){m.e(e)}finally{m.f()}L(f),s.onColReorder&&s.onColReorder({dragIndex:u,dropIndex:p,columns:i})}X.current.style.display="none",J.current.style.display="none",ne.current.draggable=!1,ne.current=null,oe.current=null}},_e=function(e){if("TH"===e.nodeName)return e;for(var t=e.parentElement;"TH"!==t.nodeName&&(t=t.parentElement););return t},Xe=function(e,t){return z.getCProp(e,t)},Je=function(){return s.onPage?s.first:g},Ve=function(){return s.onPage?s.rows:h},Ye=function(){return s.onSort?s.sortField:S},$e=function(){return s.onSort?s.sortOrder:O},Qe=function(){return(s.onSort?s.multiSortMeta:I)||[]},Ze=function(){return s.onFilter?s.filters:T},et=function(e,t){if(e&&e.length)for(var r=0;r<e.length;r++){var n=e[r];if(Xe(n,"columnKey")===t||Xe(n,"field")===t)return n}return null},tt=function(){var e=w.Children.toArray(s.children);if(e&&e.length){if(s.reorderableColumns&&F){var t,r=[],n=ce(F);try{for(n.s();!(t=n.n()).done;){var l=et(e,t.value);l&&r.push(l)}}catch(e){n.e(e)}finally{n.f()}return[].concat(r,j(e.filter((function(e){return r.indexOf(e)<0}))))}return e}return null},rt=function(e){var t,r=null,n=ce(e);try{for(n.s();!(t=n.n()).done;){var l=t.value;Xe(l,"frozen")&&(r=r||[]).push(l)}}catch(e){n.e(e)}finally{n.f()}return r},nt=function(e){var t,r=null,n=ce(e);try{for(n.s();!(t=n.n()).done;){var l=t.value;Xe(l,"frozen")||(r=r||[]).push(l)}}catch(e){n.e(e)}finally{n.f()}return r},lt=function(e){var r,n=[],l=Ze(),o=w.Children.toArray(s.children),a="strict"===s.filterMode,i=ce(e);try{for(i.s();!(r=i.n()).done;){for(var c=r.value,u=de({},c),p=!0,d=!1,f=0;f<o.length;f++){var m=o[f],g=l?l[Xe(m,"field")]:null,b=Xe(m,"field"),y=void 0;if(g){var h=g.matchMode||Xe(m,"filterMatchMode")||"startsWith";if(y={filterField:b,filterValue:g.value,filterConstraint:"custom"===h?Xe(m,"filterFunction"):t.FilterService.filters[h],isStrictMode:a,options:{rowData:c,filters:l,props:s,column:{filterMeta:g,filterField:b,props:z.getCProps(m)}}},(!a||ot(u,y)||at(u,y))&&(a||at(u,y)||ot(u,y))||(p=!1),!p)break}if(s.globalFilter&&!d){var v=de({},u);y={filterField:b,filterValue:s.globalFilter,filterConstraint:t.FilterService.filters[s.globalFilterMatchMode],isStrictMode:a},(a&&(ot(v,y)||at(v,y))||!a&&(at(v,y)||ot(v,y)))&&(d=!0,u=v)}}var C=p;s.globalFilter&&(C=p&&d),C&&n.push(u)}}catch(e){i.e(e)}finally{i.f()}return n},ot=function(e,t){if(e){var r=!1;if(e.children){var n=j(e.children);e.children=[];var l,o=ce(n);try{for(o.s();!(l=o.n()).done;){var a=de({},l.value);at(a,t)&&(r=!0,e.children.push(a))}}catch(e){o.e(e)}finally{o.f()}}if(r)return!0}},at=function(e,t){var r=t.filterField,l=t.filterValue,o=t.filterConstraint,a=t.isStrictMode,i=t.options,c=!1;return o(n.ObjectUtils.resolveFieldData(e.data,r),l,s.filterLocale,i)&&(c=!0),(!c||a&&!it(e))&&(c=ot(e,{filterField:r,filterValue:l,filterConstraint:o,isStrictMode:a})||c),c},it=function(e){return!1!==e.leaf&&!(e.children&&e.children.length)};w.useImperativeHandle(r,(function(){return{props:s,filter:Re,getElement:function(){return G.current}}}));var ct,ut=function(e,t){var r=Ye(),n=$e(),l=j(Qe()),o=Ze();return w.createElement(ae,{columns:e,columnGroup:t,tabIndex:s.tabIndex,onSort:we,sortField:r,sortIcon:s.sortIcon,sortOrder:n,multiSortMeta:l,resizableColumns:s.resizableColumns,onResizeStart:Ke,reorderableColumns:s.reorderableColumns,onDragStart:We,onDragOver:qe,onDragLeave:Ge,onDrop:Be,onFilter:Te,filters:o,filterDelay:s.filterDelay,ptCallbacks:q,metaData:W})},st=function(e,t){return w.createElement(re,{columns:e,columnGroup:t,ptCallbacks:q,metaData:W})},pt=function(e,t){return w.createElement(Z,{value:e,checkboxIcon:s.checkboxIcon,columns:t,expandedKeys:s.onToggle?s.expandedKeys:d,selectOnEdit:s.selectOnEdit,onToggle:Ce,togglerTemplate:s.togglerTemplate,onExpand:s.onExpand,onCollapse:s.onCollapse,paginator:s.paginator,first:Je(),rows:Ve(),selectionMode:s.selectionMode,selectionKeys:s.selectionKeys,onSelectionChange:s.onSelectionChange,metaKeySelection:s.metaKeySelection,onRowClick:s.onRowClick,onRowMouseEnter:s.onRowMouseEnter,onRowMouseLeave:s.onRowMouseLeave,onSelect:s.onSelect,onUnselect:s.onUnselect,propagateSelectionUp:s.propagateSelectionUp,propagateSelectionDown:s.propagateSelectionDown,lazy:s.lazy,rowClassName:s.rowClassName,emptyMessage:s.emptyMessage,loading:s.loading,contextMenuSelectionKey:s.contextMenuSelectionKey,onContextMenuSelectionChange:s.onContextMenuSelectionChange,onContextMenu:s.onContextMenu,ptCallbacks:q,metaData:W})},dt=function(e,t){var r=n.classNames("p-paginator-"+e,s.paginatorClassName);return w.createElement(c.Paginator,{first:Je(),rows:Ve(),pageLinkSize:s.pageLinkSize,className:r,onPageChange:Se,template:s.paginatorTemplate,totalRecords:t,rowsPerPageOptions:s.rowsPerPageOptions,currentPageReportTemplate:s.currentPageReportTemplate,leftContent:s.paginatorLeft,rightContent:s.paginatorRight,alwaysShow:s.alwaysShowPaginator,dropdownAppendTo:s.paginatorDropdownAppendTo,pt:q.ptm("paginator")})},ft=function(e,t,r,n,l){var o=ut(t,n),a=st(t,l),i=pt(e,t);return w.createElement(ie,{columns:t,header:o,body:i,footer:a,scrollHeight:s.scrollHeight,frozen:r,frozenWidth:s.frozenWidth,ptCallbacks:q,metaData:W})},mt=function(e){var t,r,l=tt(),o=rt(l),a=o?nt(l):l;o&&(t=ft(e,o,!0,s.frozenHeaderColumnGroup,s.frozenFooterColumnGroup)),r=ft(e,a,!1,s.headerColumnGroup,s.footerColumnGroup);var i=n.mergeProps({className:"p-treetable-wrapper p-treetable-scrollable-wrapper"},q.ptm("scrollableWrapper"));return w.createElement("div",i,t,r)},gt=function(e){var t=tt(),r=ut(t,s.headerColumnGroup),l=st(t,s.footerColumnGroup),o=pt(e,t),a=n.classNames("p-treetable-table",{"p-treetable-scrollable-table":s.scrollable,"p-treetable-resizable-table":s.resizableColumns,"p-treetable-resizable-table-fit":s.resizableColumns&&"fit"===s.columnResizeMode},s.tableClassName),i=n.mergeProps({className:"p-treetable-wrapper"},q.ptm("wrapper")),c=n.mergeProps({ref:B,style:s.tableStyle,className:a},q.ptm("table"));return w.createElement("div",i,w.createElement("table",c,r,l,o))},bt=function(){var e=s.value||[];if(!s.lazy&&e&&e.length){var t=Ze(),r=Ye(),l=Qe();(n.ObjectUtils.isNotEmpty(t)||s.globalFilter)&&(e=lt(e)),(r||n.ObjectUtils.isNotEmpty(l))&&("single"===s.sortMode?e=Pe(e):"multiple"===s.sortMode&&(e=Me(e)))}return e}(),yt=n.classNames("p-treetable p-component",{"p-treetable-hoverable-rows":s.rowHover,"p-treetable-selectable":s.selectionMode&&"single"===s.selectionMode||s.selectionMode&&"multiple"===s.selectionMode,"p-treetable-resizable":s.resizableColumns,"p-treetable-resizable-fit":s.resizableColumns&&"fit"===s.columnResizeMode,"p-treetable-striped":s.stripedRows,"p-treetable-gridlines":s.showGridlines},s.className),ht=(ct=bt,s.scrollable?mt(ct):gt(ct)),vt=function(e){return s.lazy?s.totalRecords:e?e.length:0}(bt),Ct=n.mergeProps({className:"p-treetable-header"},q.ptm("header")),St=n.mergeProps({className:"p-treetable-footer"},q.ptm("footer")),wt=n.mergeProps({ref:_,className:"p-column-resizer-helper",style:{display:"none"}},q.ptm("resizeHelper")),Et=s.header&&w.createElement("div",Ct,s.header),xt=s.footer&&w.createElement("div",St,s.footer),kt=s.paginator&&"bottom"!==s.paginatorPosition&&dt("top",vt),Pt=s.paginator&&"top"!==s.paginatorPosition&&dt("bottom",vt),Ot=function(){if(s.loading){var e=n.mergeProps({className:"p-treetable-loading-icon"},q.ptm("loadingIcon")),t=s.loadingIcon||w.createElement(i.SpinnerIcon,x({},e,{spin:!0})),r=n.IconUtils.getJSXIcon(t,de({},e),{props:s}),l=n.mergeProps({className:"p-treetable-loading"},q.ptm("loadingWrapper")),o=n.mergeProps({className:"p-treetable-loading-overlay p-component-overlay"},q.ptm("loadingOverlay"));return w.createElement("div",l,w.createElement("div",o,r))}return null}(),Mt=s.resizableColumns&&w.createElement("div",wt),Dt={position:"absolute",display:"none"},It=n.mergeProps({className:"p-datatable-reorder-indicator-up",style:de({},Dt)},q.ptm("reorderIndicatorUp")),Nt=n.mergeProps(q.ptm("reorderIndicatorUpIcon")),Rt=s.reorderableColumns&&n.IconUtils.getJSXIcon(s.reorderIndicatorUpIcon||w.createElement(o.ArrowDownIcon,Nt),de({},Nt),{props:s}),Tt=s.reorderableColumns&&w.createElement("span",x({ref:X},It),Rt),jt={className:"p-datatable-reorder-indicator-down",style:de({},Dt)},Kt=n.mergeProps(q.ptm("reorderIndicatorDownIcon")),Ut=n.IconUtils.getJSXIcon(s.reorderIndicatorDownIcon||w.createElement(a.ArrowUpIcon,Kt),de({},Kt),{props:s}),Ft=s.reorderableColumns&&w.createElement("span",x({ref:J},jt),Ut),Ht=n.mergeProps({ref:G,id:s.id,className:yt,style:s.style,"data-scrollselectors":".p-treetable-wrapper"},n.ObjectUtils.findDiffKeys(s,fe.defaultProps),q.ptm("root"));return w.createElement("div",Ht,Ot,Et,kt,ht,Pt,xt,Mt,Tt,Ft)}));fe.displayName="TreeTable",exports.TreeTable=fe;
