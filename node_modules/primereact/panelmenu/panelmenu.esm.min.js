import*as e from"react";import{CSSTransition as t}from"primereact/csstransition";import{useMountEffect as n,useUpdateEffect as r}from"primereact/hooks";import{ChevronDownIcon as l}from"primereact/icons/chevrondown";import{ChevronRightIcon as a}from"primereact/icons/chevronright";import{classNames as o,mergeProps as i,IconUtils as u,ObjectUtils as c,UniqueComponentId as m}from"primereact/utils";import{ComponentBase as s}from"primereact/componentbase";import{PrimeReactContext as p}from"primereact/api";function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function b(e){var t=d(e,"string");return"symbol"===f(t)?t:String(t)}function y(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){if(Array.isArray(e))return v(e)}function O(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function N(e){return g(e)||O(e)||h(e)||E()}function S(e){if(Array.isArray(e))return e}function j(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,o,i=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){c=!0,l=e}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw l}}return i}}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){return S(e)||j(e,t)||h(e,t)||P()}var I=s.extend({defaultProps:{__TYPE:"Panel",id:null,model:null,style:null,submenuIcon:null,className:null,multiple:!1,transitionOptions:null,children:void 0}});function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=e.memo((function(r){var m=x(e.useState(null),2),s=m[0],p=m[1],f=function(e,t){return r.ptm(t,{context:{active:y(e)}})},d=function(){if(r.model){if(r.multiple)return r.model.filter((function(e){return e.expanded}));var e=null;return r.model.forEach((function(t){t.expanded&&(e?t.expanded=!1:e=t)})),e}return null},b=function(e,t){if(t.disabled)e.preventDefault();else{t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t});var n=s;y(t)?(t.expanded=!1,p(r.multiple?n.filter((function(e){return e!==t})):null)):(!r.multiple&&n&&(n.expanded=!1),t.expanded=!0,p(r.multiple?[].concat(N(n||[]),[t]):t))}},y=function(e){return s&&(r.multiple?s.indexOf(e)>-1:s===e)};n((function(){p(d())}));var v=function(t){var n=i({key:"separator_"+t,className:"p-menu-separator"},r.ptm("separator"));return e.createElement("li",n)},g=function(n,l){var a=o("p-toggleable-content",{"p-toggleable-content-collapsed":!l}),u=e.createRef(),c=i({ref:u,className:a},r.ptm("toggleableContent"));return n.items?e.createElement(t,{nodeRef:u,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},in:l,unmountOnExit:!0},e.createElement("div",c,e.createElement(D,{menuProps:r.menuProps,model:n.items,multiple:r.multiple,submenuIcon:r.submenuIcon,ptm:r.ptm}))):null},O=function(t,n){if(!1===t.visible)return null;var m=t.label+"_"+n,s=y(t),p=o("p-menuitem",t.className),d=o("p-menuitem-link",{"p-disabled":t.disabled}),v=o("p-menuitem-icon",t.icon),O=i({className:v},f(t,"icon")),h=u.getJSXIcon(t.icon,C({},O),{props:r.menuProps}),E=i({className:"p-menuitem-text"},f(t,"label")),N=t.label&&e.createElement("span",E,t.label),S="p-panelmenu-icon",j=i({className:S},f(t,"submenuicon")),P=t.items&&u.getJSXIcon(s?r.submenuIcon||e.createElement(l,j):r.submenuIcon||e.createElement(a,j)),x=g(t,s),I=i({href:t.url||"#",className:d,target:t.target,onClick:function(e){return b(e,t)},role:"menuitem","aria-disabled":t.disabled},f(t,"action")),w=e.createElement("a",I,P,h,N);t.template&&(w=c.getJSXElement(t.template,t,{onClick:function(e){return b(e,t)},className:d,labelClassName:"p-menuitem-text",iconClassName:v,submenuIconClassName:S,element:w,props:r,leaf:!t.items,active:s}));var D=i({key:m,id:t.id,className:p,style:t.style,role:"none"},f(t,"menuitem"));return e.createElement("li",D,w,x)},h=function(e,t){return e.separator?v(t):O(e,t)},E=o("p-submenu-list",r.className),S=r.model?r.model.map(h):null,j=i({className:E,role:"tree"},r.ptm("menu"));return e.createElement("ul",j,S)}));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}D.displayName="PanelMenuSub";var _=e.memo(e.forwardRef((function(s,f){var d=e.useContext(p),b=I.getProps(s,d),y=x(e.useState(b.id),2),v=y[0],g=y[1],O=x(e.useState(null),2),h=O[0],E=O[1],S=x(e.useState(!1),2),j=S[0],P=S[1],w=e.useRef(null),C=v+"_header",k=v+"_content",_=I.setMetaData({props:b,state:{id:v,activeItem:h,animationDisabled:j}}).ptm,J=function(){if(b.model){if(b.multiple)return b.model.filter((function(e){return e.expanded}));var e=null;return b.model.forEach((function(t){t.expanded&&(e?t.expanded=!1:e=t)})),e}return null},R=function(e,t){if(t.disabled)e.preventDefault();else{t.url||e.preventDefault(),t.command&&t.command({originalEvent:e,item:t});var n=h;X(t)?(t.expanded=!1,E(b.multiple?n.filter((function(e){return e!==t})):null)):(!b.multiple&&n&&(n.expanded=!1),t.expanded=!0,E(b.multiple?[].concat(N(n||[]),[t]):t))}},X=function(e){return h&&(b.multiple?h.indexOf(e)>-1:h===e)},T=function(e,t){return _(t,{context:{active:X(e)}})};e.useImperativeHandle(f,(function(){return{props:b,getElement:function(){return w.current}}})),n((function(){v||g(m()),E(J())})),r((function(){P(!0),E(J())}),[b.model]);var M=function(){P(!1)},H=function(n,r){if(!1===n.visible)return null;var m=n.label+"_"+r,s=X(n),p=o("p-panelmenu-panel",n.className),f=o("p-component p-panelmenu-header",{"p-highlight":s,"p-disabled":n.disabled}),d=o("p-menuitem-icon",n.icon),y=i({className:d},T(n,"headerIcon")),v=u.getJSXIcon(n.icon,A({},y),{props:b}),g="p-panelmenu-icon",O=i({className:g},T(n,"headerSubmenuIcon")),h=n.items&&u.getJSXIcon(s?b.submenuIcon||e.createElement(l,O):b.submenuIcon||e.createElement(a,O)),E=i({className:"p-menuitem-text"},T(n,"headerLabel")),N=n.label&&e.createElement("span",E,n.label),S=o("p-toggleable-content",{"p-toggleable-content-collapsed":!s}),P=e.createRef(),x=i({href:n.url||"#",className:"p-panelmenu-header-link",onClick:function(e){return R(e,n)},"aria-expanded":s,id:C,"aria-controls":k,"aria-disabled":n.disabled},T(n,"headerAction")),I=e.createElement("a",x,h,v,N);n.template&&(I=c.getJSXElement(n.template,n,{onClick:function(e){return R(e,n)},className:"p-panelmenu-header-link",labelClassName:"p-menuitem-text",submenuIconClassName:g,iconClassName:d,element:I,props:b,leaf:!n.items,active:s}));var w=i({key:m,className:p,style:n.style},T(n,"panel")),J=i({className:f,style:n.style},T(n,"header")),H=i({className:"p-panelmenu-content"},T(n,"menuContent")),L=i({ref:P,className:S,role:"region",id:k,"aria-labelledby":C},T(n,"headerToggleableContent"));return e.createElement("div",w,e.createElement("div",J,I),e.createElement(t,{nodeRef:P,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},onEnter:M,disabled:j,in:s,unmountOnExit:!0,options:b.transitionOptions},e.createElement("div",L,e.createElement("div",H,e.createElement(D,{menuProps:b,model:n.items,className:"p-panelmenu-root-submenu",multiple:b.multiple,submenuIcon:b.submenuIcon,ptm:_})))))},L=o("p-panelmenu p-component",b.className),U=b.model?b.model.map(H):null,Y=i({id:b.id,ref:w,className:L,style:b.style},I.getOtherProps(b),_("root"));return e.createElement("div",Y,U)})));_.displayName="PanelMenu";export{_ as PanelMenu};
