import*as e from"react";import{useUpdateEffect as t}from"primereact/hooks";import{mergeProps as n,ObjectUtils as r,classNames as a,IconUtils as o}from"primereact/utils";import{ComponentBase as l}from"primereact/componentbase";import{PrimeReactContext as i,ariaLabel as p,localeOption as s}from"primereact/api";import{AngleDoubleLeftIcon as c}from"primereact/icons/angledoubleleft";import{Ripple as u}from"primereact/ripple";import{InputNumber as m}from"primereact/inputnumber";import{AngleDoubleRightIcon as g}from"primereact/icons/angledoubleright";import{AngleRightIcon as d}from"primereact/icons/angleright";import{AngleLeftIcon as f}from"primereact/icons/angleleft";import{Dropdown as b}from"primereact/dropdown";function P(e){if(Array.isArray(e))return e}function v(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,i=[],p=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;p=!1}else for(;!(p=(r=o.call(n)).done)&&(i.push(r.value),i.length!==t);p=!0);}catch(e){s=!0,a=e}finally{try{if(!p&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return i}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function h(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function C(e){var t=h(e,"string");return"symbol"===w(t)?t:String(t)}function j(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=l.extend({defaultProps:{__TYPE:"Paginator",totalRecords:0,rows:0,first:0,pageLinkSize:5,rowsPerPageOptions:null,alwaysShow:!0,style:null,className:null,template:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",onPageChange:null,leftContent:null,rightContent:null,dropdownAppendTo:null,currentPageReportTemplate:"({currentPage} of {totalPages})",children:void 0}}),L=l.extend({defaultProps:{__TYPE:"CurrentPageReport",pageCount:null,page:null,first:null,rows:null,totalRecords:null,reportTemplate:"({currentPage} of {totalPages})",template:null,children:void 0}}),S=l.extend({defaultProps:{__TYPE:"FirstPageLink",disabled:!1,onClick:null,template:null,firstPageLinkIcon:null,children:void 0}}),N=l.extend({defaultProps:{__TYPE:"JumpToPageInput",page:null,rows:null,pageCount:null,disabled:!1,template:null,onChange:null,children:void 0}}),x=l.extend({defaultProps:{__TYPE:"LastPageLink",disabled:!1,onClick:null,template:null,lastPageLinkIcon:null,children:void 0}}),I=l.extend({defaultProps:{__TYPE:"NextPageLink",disabled:!1,onClick:null,template:null,nextPageLinkIcon:null,children:void 0}}),D=l.extend({defaultProps:{__TYPE:"PageLinks",value:null,page:null,rows:null,pageCount:null,links:null,template:null,children:void 0}}),R=l.extend({defaultProps:{__TYPE:"PrevPageLink",disabled:!1,onClick:null,template:null,prevPageLinkIcon:null,children:void 0}}),T=l.extend({defaultProps:{__TYPE:"RowsPerPageDropdown",options:null,value:null,page:null,pageCount:null,totalRecords:0,appendTo:null,onChange:null,template:null,disabled:!1,children:void 0}});function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X=e.memo((function(t){var a=e.useContext(i),o=L.getProps(t,a),l={currentPage:o.page+1,totalPages:o.pageCount,first:Math.min(o.first+1,o.totalRecords),last:Math.min(o.first+o.rows,o.totalRecords),rows:o.rows,totalRecords:o.totalRecords},p=o.reportTemplate.replace("{currentPage}",l.currentPage).replace("{totalPages}",l.totalPages).replace("{first}",l.first).replace("{last}",l.last).replace("{rows}",l.rows).replace("{totalRecords}",l.totalRecords),s=n({className:"p-paginator-current"},o.ptm("current")),c=e.createElement("span",s,p);if(o.template){var u=_(_({},l),{className:"p-paginator-current",element:c,props:o});return r.getJSXElement(o.template,u)}return c}));function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}X.displayName="CurrentPageReport";var A=e.memo((function(t){var l=e.useContext(i),s=S.getProps(t,l),m=function(e){return s.ptm(e,{context:{disabled:s.disabled}})},g=a("p-paginator-first p-paginator-element p-link",{"p-disabled":s.disabled}),d="p-paginator-icon",f=n({className:d},m("firstPageIcon")),b=o.getJSXIcon(s.firstPageLinkIcon||e.createElement(c,f),Y({},f),{props:s}),P=n({type:"button",className:g,onClick:s.onClick,disabled:s.disabled,"aria-label":p("firstPageLabel")},m("firstPageButton")),v=e.createElement("button",P,b,e.createElement(u,null));return s.template?r.getJSXElement(s.template,{onClick:s.onClick,className:g,iconClassName:d,disabled:s.disabled,element:v,props:s}):v}));A.displayName="FirstPageLink";var B=e.memo((function(t){var n=e.useContext(i),a=N.getProps(t,n),o=function(e){a.onChange&&a.onChange(a.rows*(e.value-1),a.rows)},l=a.pageCount>0?a.page+1:0,p=e.createElement(m,{value:l,onChange:o,className:"p-paginator-page-input",disabled:a.disabled,pt:a.ptm("JTPInput")});return a.template?r.getJSXElement(a.template,{value:l,onChange:o,disabled:a.disabled,className:"p-paginator-page-input",element:p,props:a}):p}));function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}B.displayName="JumpToPageInput";var H=e.memo((function(t){var l=e.useContext(i),s=x.getProps(t,l),c=function(e){return s.ptm(e,{context:{disabled:s.disabled}})},m=a("p-paginator-last p-paginator-element p-link",{"p-disabled":s.disabled}),d="p-paginator-icon",f=n({className:d},c("lastPageIcon")),b=o.getJSXIcon(s.lastPageLinkIcon||e.createElement(g,f),z({},f),{props:s}),P=n({type:"button",className:m,onClick:s.onClick,disabled:s.disabled,"aria-label":p("lastPageLabel")},c("lastPageButton")),v=e.createElement("button",P,b,e.createElement(u,null));return s.template?r.getJSXElement(s.template,{onClick:s.onClick,className:m,iconClassName:d,disabled:s.disabled,element:v,props:s}):v}));function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}H.displayName="LastPageLink";var q=e.memo((function(t){var l=e.useContext(i),s=I.getProps(t,l),c=function(e){return s.ptm(e,{context:{disabled:s.disabled}})},m=a("p-paginator-next p-paginator-element p-link",{"p-disabled":s.disabled}),g="p-paginator-icon",f=n({className:g},c("nextPageIcon")),b=o.getJSXIcon(s.nextPageLinkIcon||e.createElement(d,f),$({},f),{props:s}),P=n({type:"button",className:m,onClick:s.onClick,disabled:s.disabled,"aria-label":p("nextPageLabel")},c("nextPageButton")),v=e.createElement("button",P,b,e.createElement(u,null));return s.template?r.getJSXElement(s.template,{onClick:s.onClick,className:m,iconClassName:g,disabled:s.disabled,element:v,nextPageLinkIcon:b,props:s}):v}));q.displayName="NextPageLink";var G=e.memo((function(t){var o,l=e.useContext(i),s=D.getProps(t,l),c=function(e,t){return s.ptm(t,{context:{active:e-1===s.page}})},m=function(e,t){s.onClick&&s.onClick({originalEvent:e,value:t}),e.preventDefault()};if(s.value){var g=s.value[0],d=s.value[s.value.length-1];o=s.value.map((function(t){var o=a("p-paginator-page p-paginator-element p-link",{"p-paginator-page-start":t===g,"p-paginator-page-end":t===d,"p-highlight":t-1===s.page}),l=n({type:"button",onClick:function(e){return m(e,t)},className:o,disabled:s.disabled,"aria-label":p("pageLabel",{page:t+1})},c(t,"pageButton")),i=e.createElement("button",l,t,e.createElement(u,null));s.template&&(i=r.getJSXElement(s.template,{onClick:function(e){return m(e,t)},className:o,view:{startPage:g-1,endPage:d-1},page:t-1,currentPage:s.page,totalPages:s.pageCount,element:i,props:s}));return e.createElement(e.Fragment,{key:t},i)}))}var f=n({className:"p-paginator-pages"},s.ptm("pages"));return e.createElement("span",f,o)}));function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}G.displayName="PageLinks";var V=e.memo((function(t){var l=e.useContext(i),s=R.getProps(t,l),c=function(e){return s.ptm(e,{context:{disabled:s.disabled}})},m=a("p-paginator-prev p-paginator-element p-link",{"p-disabled":s.disabled}),g="p-paginator-icon",d=n({className:g},c("prevPageIcon")),b=o.getJSXIcon(s.prevPageLinkIcon||e.createElement(f,d),Q({},d),{props:s}),P=n({type:"button",className:m,onClick:s.onClick,disabled:s.disabled,"aria-label":p("previousPageLabel")},c("prevPageButton")),v=e.createElement("button",P,b,e.createElement(u,null));return s.template?r.getJSXElement(s.template,{onClick:s.onClick,className:m,iconClassName:g,disabled:s.disabled,element:v,props:s}):v}));V.displayName="PrevPageLink";var W=e.memo((function(t){var n=e.useContext(i),a=T.getProps(t,n),o=a.options&&a.options.length>0,l=o?a.options.map((function(e){return{label:String(e),value:e}})):[],p=s("choose"),c=o?e.createElement(b,{value:a.value,options:l,onChange:a.onChange,appendTo:a.appendTo,disabled:a.disabled,placeholder:p,"aria-label":p,pt:a.ptm("RPPDropdown")}):null;return a.template?r.getJSXElement(a.template,{value:a.value,options:l,onChange:a.onChange,appendTo:a.appendTo,currentPage:a.page,totalPages:a.pageCount,totalRecords:a.totalRecords,disabled:a.disabled,element:c,props:a}):c}));W.displayName="RowsPerPageDropdown";var Z=e.memo(e.forwardRef((function(o,l){var p=e.useContext(i),s=E.getProps(o,p),c=E.setMetaData({props:s}).ptm,u=e.useRef(null),m=Math.floor(s.first/s.rows),g=Math.ceil(s.totalRecords/s.rows),d=0===m,f=m===g-1,b=0===g,y=function(){var e=g,t=Math.min(s.pageLinkSize,e),n=Math.max(0,Math.ceil(m-t/2)),r=Math.min(e-1,n+t-1);return[n=Math.max(0,n-(s.pageLinkSize-(r-n+1))),r]},h=function(){for(var e=[],t=y(),n=t[1],r=t[0];r<=n;r++)e.push(r+1);return e},C=function(e,t){var n=g,r=Math.floor(e/t);r>=0&&r<n&&(s.onPageChange&&s.onPageChange({first:e,rows:t,page:r,pageCount:n}))},j=function(e){C(0,s.rows),e.preventDefault()},L=function(e){C(s.first-s.rows,s.rows),e.preventDefault()},S=function(e){C((e.value-1)*s.rows,s.rows)},N=function(e){C(s.first+s.rows,s.rows),e.preventDefault()},x=function(e){C((g-1)*s.rows,s.rows),e.preventDefault()},I=function(e){C(0,e.value)};e.useImperativeHandle(l,(function(){return{props:s,getElement:function(){return u.current}}})),t((function(){m>0&&s.first>=s.totalRecords&&C((g-1)*s.rows,s.rows)}),[s.totalRecords]);var D=function(t,n){var r;switch(t){case"FirstPageLink":r=e.createElement(A,{key:t,onClick:j,disabled:d||b,template:n,firstPageLinkIcon:s.firstPageLinkIcon,ptm:c});break;case"PrevPageLink":r=e.createElement(V,{key:t,onClick:L,disabled:d||b,template:n,prevPageLinkIcon:s.prevPageLinkIcon,ptm:c});break;case"NextPageLink":r=e.createElement(q,{key:t,onClick:N,disabled:f||b,template:n,nextPageLinkIcon:s.nextPageLinkIcon,ptm:c});break;case"LastPageLink":r=e.createElement(H,{key:t,onClick:x,disabled:f||b,template:n,lastPageLinkIcon:s.lastPageLinkIcon,ptm:c});break;case"PageLinks":r=e.createElement(G,{key:t,value:h(),page:m,rows:s.rows,pageCount:g,onClick:S,template:n,ptm:c});break;case"RowsPerPageDropdown":r=e.createElement(W,{key:t,value:s.rows,page:m,pageCount:g,totalRecords:s.totalRecords,options:s.rowsPerPageOptions,onChange:I,appendTo:s.dropdownAppendTo,template:n,disabled:b,ptm:c});break;case"CurrentPageReport":r=e.createElement(X,{reportTemplate:s.currentPageReportTemplate,key:t,page:m,pageCount:g,first:s.first,rows:s.rows,totalRecords:s.totalRecords,template:n,ptm:c});break;case"JumpToPageInput":r=e.createElement(B,{key:t,rows:s.rows,page:m,pageCount:g,onChange:C,disabled:b,template:n,ptm:c});break;default:r=null}return r};if(!s.alwaysShow&&g<=1)return null;var R,T=a("p-paginator p-component",s.className),J=r.getJSXElement(s.leftContent,s),_=r.getJSXElement(s.rightContent,s),M=(R=s.template)?"object"===w(R)?R.layout?R.layout.split(" ").map((function(e){var t=e.trim();return D(t,R[t])})):Object.entries(R).map((function(e){var t,n,r=(n=2,P(t=e)||v(t,n)||k(t,n)||O());return D(r[0],r[1])})):R.split(" ").map((function(e){return D(e.trim())})):null,Y=n({className:"p-paginator-left-content"},c("left")),F=J&&e.createElement("div",Y,J),z=n({className:"p-paginator-right-content"},c("end")),U=_&&e.createElement("div",z,_),$=n({ref:u,className:T,style:s.style},E.getOtherProps(s),c("root"));return e.createElement("div",$,F,M,U)})));Z.displayName="Paginator";export{Z as Paginator};
