"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("primereact/api"),n=require("primereact/csstransition"),r=require("primereact/hooks"),o=require("primereact/icons/times"),i=require("primereact/icons/windowmaximize"),a=require("primereact/icons/windowminimize"),l=require("primereact/portal"),u=require("primereact/ripple"),c=require("primereact/utils"),s=require("primereact/componentbase");function m(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var p=d(e),f=m(t);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function y(e){var t=b(e,"string");return"symbol"===g(t)?t:String(t)}function v(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e){if(Array.isArray(e))return h(e)}function E(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function D(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function S(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e){if(Array.isArray(e))return e}function z(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(e,t){return x(e)||z(e,t)||D(e,t)||P()}var I=s.ComponentBase.extend({defaultProps:{__TYPE:"Dialog",appendTo:null,ariaCloseIconLabel:null,baseZIndex:0,blockScroll:!1,breakpoints:null,className:null,closable:!0,closeIcon:null,closeOnEscape:!0,contentClassName:null,contentStyle:null,dismissableMask:!1,draggable:!0,focusOnShow:!0,footer:null,header:null,headerClassName:null,headerStyle:null,icons:null,id:null,keepInViewport:!0,maskClassName:null,maskStyle:null,maximizable:!1,maximizeIcon:null,maximized:!1,minX:0,minY:0,minimizeIcon:null,modal:!0,onClick:null,onDrag:null,onDragEnd:null,onDragStart:null,onHide:null,onMaskClick:null,onMaximize:null,onResize:null,onResizeEnd:null,onResizeStart:null,onShow:null,position:"center",resizable:!0,rtl:!1,showHeader:!0,style:null,transitionOptions:null,visible:!1,children:void 0}});function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=p.forwardRef((function(e,s){var m=p.useContext(t.PrimeReactContext),d=I.getProps(e,m),g=d.id?d.id:c.UniqueComponentId(),b=O(p.useState(g),2),y=b[0],v=O(p.useState(!1),2),h=v[0],x=v[1],z=O(p.useState(!1),2),P=z[0],k=z[1],H=O(p.useState(d.maximized),2),j=H[0],R=H[1],N=p.useRef(null),M=p.useRef(null),U=p.useRef(null),X=p.useRef(null),T=p.useRef(null),q=p.useRef(null),A=p.useRef(null),B=p.useRef(!1),Y=p.useRef(!1),_=p.useRef(null),L=p.useRef(null),Z=p.useRef(null),V=p.useRef(g),J=d.onMaximize?d.maximized:j,W=I.setMetaData({props:d,state:{id:y,maximized:J,containerVisible:h}}).ptm,F=O(r.useEventListener({type:"keydown",listener:function(e){return fe(e)}}),2),$=F[0],K=F[1],G=O(r.useEventListener({type:"mousemove",target:function(){return window.document},listener:function(e){return we(e)}}),2),Q=G[0],ee=G[1],te=O(r.useEventListener({type:"mouseup",target:function(){return window.document},listener:function(e){return Ee(e)}}),2),ne=te[0],re=te[1],oe=O(r.useEventListener({type:"mousemove",target:function(){return window.document},listener:function(e){return be(e)}}),2),ie=oe[0],ae=oe[1],le=O(r.useEventListener({type:"mouseup",target:function(){return window.document},listener:function(e){return ye(e)}}),2),ue=le[0],ce=le[1],se=function(e){d.onHide(),e.preventDefault()},me=function(e){U.current=e.target,d.onPointerDown&&d.onPointerDown(e)},de=function(e){d.dismissableMask&&d.modal&&M.current===e.target&&!U.current&&se(e),d.onMaskClick&&d.onMaskClick(e),U.current=null},pe=function(e){d.onMaximize?d.onMaximize({originalEvent:e,maximized:!J}):R((function(e){return!e})),e.preventDefault()},fe=function(e){var t=e.currentTarget;if(t&&t.primeDialogParams){var n=t.primeDialogParams,r=n.length,o=n[r-1]?n[r-1].id:void 0;if(o===y){var i=document.getElementById(o);if(d.closable&&d.closeOnEscape&&"Escape"===e.key)se(e),e.stopImmediatePropagation(),n.splice(r-1,1);else if("Tab"===e.key){e.preventDefault();var a=c.DomHandler.getFocusableElements(i);if(a&&a.length>0)if(document.activeElement){var l=a.indexOf(document.activeElement);e.shiftKey?-1===l||0===l?a[a.length-1].focus():a[l-1].focus():-1===l||l===a.length-1?a[0].focus():a[l+1].focus()}else a[0].focus()}}}},ge=function(e){c.DomHandler.hasClass(e.target,"p-dialog-header-icon")||c.DomHandler.hasClass(e.target.parentElement,"p-dialog-header-icon")||d.draggable&&(B.current=!0,_.current=e.pageX,L.current=e.pageY,N.current.style.margin="0",c.DomHandler.addClass(document.body,"p-unselectable-text"),d.onDragStart&&d.onDragStart(e))},be=function(e){if(B.current){var t=c.DomHandler.getOuterWidth(N.current),n=c.DomHandler.getOuterHeight(N.current),r=e.pageX-_.current,o=e.pageY-L.current,i=N.current.getBoundingClientRect(),a=i.left+r,l=i.top+o,u=c.DomHandler.getViewport();N.current.style.position="fixed",d.keepInViewport?(a>=d.minX&&a+t<u.width&&(_.current=e.pageX,N.current.style.left=a+"px"),l>=d.minY&&l+n<u.height&&(L.current=e.pageY,N.current.style.top=l+"px")):(_.current=e.pageX,N.current.style.left=a+"px",L.current=e.pageY,N.current.style.top=l+"px"),d.onDrag&&d.onDrag(e)}},ye=function(e){B.current&&(B.current=!1,c.DomHandler.removeClass(document.body,"p-unselectable-text"),d.onDragEnd&&d.onDragEnd(e))},ve=function(e){d.resizable&&(Y.current=!0,_.current=e.pageX,L.current=e.pageY,c.DomHandler.addClass(document.body,"p-unselectable-text"),d.onResizeStart&&d.onResizeStart(e))},he=function(e,t,n){!n&&(n=c.DomHandler.getViewport());var r=parseInt(e);return/^(\d+|(\.\d+))(\.\d+)?%$/.test(e)?r*(n[t]/100):r},we=function(e){if(Y.current){var t=e.pageX-_.current,n=e.pageY-L.current,r=c.DomHandler.getOuterWidth(N.current),o=c.DomHandler.getOuterHeight(N.current),i=N.current.getBoundingClientRect(),a=c.DomHandler.getViewport(),l=!parseInt(N.current.style.top)||!parseInt(N.current.style.left),u=he(N.current.style.minWidth,"width",a),s=he(N.current.style.minHeight,"height",a),m=r+t,p=o+n;l&&(m+=t,p+=n),(!u||m>u)&&i.left+m<a.width&&(N.current.style.width=m+"px"),(!s||p>s)&&i.top+p<a.height&&(N.current.style.height=p+"px"),_.current=e.pageX,L.current=e.pageY,d.onResize&&d.onResize(e)}},Ee=function(e){Y.current&&(Y.current=!1,c.DomHandler.removeClass(document.body,"p-unselectable-text"),d.onResizeEnd&&d.onResizeEnd(e))},De=function(){N.current.style.position="",N.current.style.left="",N.current.style.top="",N.current.style.margin=""},Se=function(){N.current.setAttribute(V.current,"")},xe=function(){var e;d.onShow&&d.onShow(),d.focusOnShow&&!((e=document.activeElement)&&N.current&&N.current.contains(e))&&d.closable&&d.showHeader&&A.current.focus(),Oe()},ze=function(){d.modal&&c.DomHandler.addClass(M.current,"p-component-overlay-leave"),d.blockScroll&&c.DomHandler.removeClass(document.body,"p-overflow-hidden")},Pe=function(){B.current=!1,c.ZIndexUtils.clear(M.current),x(!1),Ie()},Oe=function(){ke(),(d.blockScroll||d.maximizable&&J)&&c.DomHandler.addClass(document.body,"p-overflow-hidden")},Ie=function(){Ce();var e=d.maximizable&&J;d.modal?(document.primeDialogParams&&document.primeDialogParams.some((function(e){return e.hasBlockScroll}))||e)&&c.DomHandler.removeClass(document.body,"p-overflow-hidden"):(d.blockScroll||e)&&c.DomHandler.removeClass(document.body,"p-overflow-hidden")},ke=function(){d.draggable&&(ie(),ue()),d.resizable&&(Q(),ne()),$();var e,t={id:y,hasBlockScroll:d.blockScroll};document.primeDialogParams=document.primeDialogParams?[].concat(w(e=document.primeDialogParams)||E(e)||D(e)||S(),[t]):[t]},Ce=function(){ae(),ce(),ee(),re(),K(),document.primeDialogParams=document.primeDialogParams&&document.primeDialogParams.filter((function(e){return e.id!==y}))},He=function(){Z.current=c.DomHandler.createInlineStyle(m&&m.nonce||f.default.nonce);var e="";for(var t in d.breakpoints)e+="\n                @media screen and (max-width: ".concat(t,") {\n                    .p-dialog[").concat(V.current,"] {\n                        width: ").concat(d.breakpoints[t]," !important;\n                    }\n                }\n            ");Z.current.innerHTML=e};r.useMountEffect((function(){d.visible&&x(!0),d.breakpoints&&He()})),r.useUpdateEffect((function(){d.visible&&!h&&x(!0),d.visible!==P&&h&&k(d.visible)})),r.useUpdateEffect((function(){h&&(c.ZIndexUtils.set("modal",M.current,m&&m.autoZIndex||f.default.autoZIndex,d.baseZIndex||m&&m.zIndex.modal||f.default.zIndex.modal),k(!0))}),[h]),r.useUpdateEffect((function(){d.blockScroll||c.DomHandler[J&&P?"addClass":"removeClass"](document.body,"p-overflow-hidden")}),[d.maximized,j,P]),r.useUnmountEffect((function(){Ie(),c.DomHandler.removeInlineStyle(Z.current),c.ZIndexUtils.clear(M.current)})),p.useImperativeHandle(s,(function(){return{props:d,resetPosition:De,getElement:function(){return N.current},getMask:function(){return M.current},getContent:function(){return X.current},getHeader:function(){return T.current},getFooter:function(){return q.current},getCloseButton:function(){return A.current}}}));var je,Re,Ne,Me,Ue,Xe,Te,qe,Ae,Be,Ye,_e,Le=function(){if(d.closable){var e=d.ariaCloseIconLabel||t.localeOption("close"),n=c.mergeProps({className:"p-dialog-header-close-icon","aria-hidden":!0},W("closeButtonIcon")),r=c.IconUtils.getJSXIcon(d.closeIcon||p.createElement(o.TimesIcon,n),C({},n),{props:d}),i=c.mergeProps({ref:A,type:"button",className:"p-dialog-header-icon p-dialog-header-close p-link","aria-label":e,onClick:se},W("closeButton"));return p.createElement("button",i,r,p.createElement(u.Ripple,null))}return null},Ze=function(){var e=c.mergeProps({className:"p-dialog-header-maximize-icon"},W("maximizableIcon")),t=c.IconUtils.getJSXIcon(J?d.minimizeIcon||p.createElement(a.WindowMinimizeIcon,e):d.maximizeIcon||p.createElement(i.WindowMaximizeIcon,e),e,{props:d});if(d.maximizable){var n=c.mergeProps({type:"button",className:"p-dialog-header-icon p-dialog-header-maximize p-link",onClick:pe},W("maximizableButton"));return p.createElement("button",n,t,p.createElement(u.Ripple,null))}return null},Ve=function(){if(d.showHeader){var e=Le(),t=Ze(),n=c.ObjectUtils.getJSXElement(d.icons,d),r=c.ObjectUtils.getJSXElement(d.header,d),o=y+"_header",i=c.classNames("p-dialog-header",d.headerClassName),a=c.mergeProps({ref:T,style:d.headerStyle,className:i,onMouseDown:ge},W("header")),l=c.mergeProps({id:o,className:"p-dialog-title"},W("headerTitle")),u=c.mergeProps({className:"p-dialog-header-icons"},W("headerIcons"));return p.createElement("div",a,p.createElement("div",l,r),p.createElement("div",u,n,t,e))}return null},Je=function(){var e=c.classNames("p-dialog-content",d.contentClassName),t=c.mergeProps({id:y+"_content",ref:X,style:d.contentStyle,className:e},W("content"));return p.createElement("div",t,d.children)},We=function(){var e=c.ObjectUtils.getJSXElement(d.footer,d),t=c.mergeProps({ref:q,className:"p-dialog-footer"},W("footer"));return e&&p.createElement("div",t,e)};return h&&(Re=c.classNames("p-dialog p-component",d.className,{"p-dialog-rtl":d.rtl,"p-dialog-maximized":J,"p-dialog-default":!J,"p-input-filled":m&&"filled"===m.inputStyle||"filled"===f.default.inputStyle,"p-ripple-disabled":m&&!1===m.ripple||!1===f.default.ripple}),Ne=c.classNames("p-dialog-mask",(je=["center","left","right","top","top-left","top-right","bottom","bottom-left","bottom-right"].find((function(e){return e===d.position||e.replace("-","")===d.position})))?"p-dialog-".concat(je):"",{"p-component-overlay p-component-overlay-enter":d.modal,"p-dialog-visible":h,"p-dialog-draggable":d.draggable,"p-dialog-resizable":d.resizable},d.maskClassName),Me=Ve(),Ue=Je(),Xe=We(),Te=d.resizable?p.createElement("span",{className:"p-resizable-handle",style:{zIndex:90},onMouseDown:ve}):null,qe=y+"_header",Ae=y+"_content",Be={enter:"center"===d.position?150:300,exit:"center"===d.position?150:300},Ye=c.mergeProps({ref:M,style:d.maskStyle,className:Ne,onPointerUp:de},W("mask")),_e=c.mergeProps({ref:N,id:y,className:Re,style:d.style,onClick:d.onClick,role:"dialog","aria-labelledby":qe,"aria-describedby":Ae,"aria-modal":d.modal,onPointerDown:me},I.getOtherProps(d),W("root")),p.createElement(l.Portal,{element:p.createElement("div",Ye,p.createElement(n.CSSTransition,{nodeRef:N,classNames:"p-dialog",timeout:Be,in:P,options:d.transitionOptions,unmountOnExit:!0,onEnter:Se,onEntered:xe,onExiting:ze,onExited:Pe},p.createElement("div",_e,Me,Ue,Xe,Te))),appendTo:d.appendTo,visible:!0}))}));H.displayName="Dialog",exports.Dialog=H;
