import*as t from"react";import{useUnmountEffect as e}from"primereact/hooks";import{classNames as r,mergeProps as n}from"primereact/utils";import{ComponentBase as u}from"primereact/componentbase";import{PrimeReactContext as a}from"primereact/api";var i=u.extend({defaultProps:{__TYPE:"Chart",id:null,type:null,data:null,options:null,plugins:null,width:null,height:null,style:null,className:null,children:void 0}}),o=function(){try{return Chart}catch(t){return null}}(),l=t.memo(t.forwardRef((function(u,l){var c=t.useContext(a),s=i.getProps(u,c),p=i.setMetaData({props:s}).ptm,f=t.useRef(null),m=t.useRef(null),h=t.useRef(null),d=function(){g();var t={type:s.type,data:s.data,options:s.options,plugins:s.plugins};o?m.current=new o(h.current,t):import("chart.js/auto").then((function(e){g(),h.current&&e&&(m.current=e.default?new e.default(h.current,t):new e(h.current,t))}))},g=function(){m.current&&(m.current.destroy(),m.current=null)};t.useImperativeHandle(l,(function(){return{props:s,getCanvas:function(){return h.current},getChart:function(){return m.current},getBase64Image:function(){return m.current.toBase64Image()},getElement:function(){return f.current},generateLegend:function(){return m.current&&m.current.generateLegend()},refresh:function(){return m.current&&m.current.update()}}})),t.useEffect((function(){d()})),e((function(){g()}));var y=r("p-chart",s.className),v=Object.assign({width:s.width,height:s.height},s.style),w=s.ariaLabel||s.options&&s.options.plugins&&s.options.plugins.title&&s.options.plugins.title.text,C=n({id:s.id,ref:f,style:v,className:y},i.getOtherProps(s),p("root")),E=n({ref:h,width:s.width,height:s.height,role:"img","aria-label":w},p("canvas"));return t.createElement("div",C,t.createElement("canvas",E))})),(function(t,e){return t.data===e.data&&t.options===e.options&&t.type===e.type}));l.displayName="Chart";export{l as Chart};
