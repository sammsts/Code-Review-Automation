import*as e from"react";import{TransitionGroup as t}from"react-transition-group";import o,{PrimeReactContext as n}from"primereact/api";import{CSSTransition as r}from"primereact/csstransition";import{useTimeout as a,useUpdateEffect as l,useUnmountEffect as i}from"primereact/hooks";import{Portal as s}from"primereact/portal";import{classNames as c,mergeProps as u,DomHandler as m,IconUtils as p,ObjectUtils as d,ZIndexUtils as f}from"primereact/utils";import{ComponentBase as y}from"primereact/componentbase";import{CheckIcon as b}from"primereact/icons/check";import{ExclamationTriangleIcon as v}from"primereact/icons/exclamationtriangle";import{InfoCircleIcon as g}from"primereact/icons/infocircle";import{TimesIcon as E}from"primereact/icons/times";import{TimesCircleIcon as S}from"primereact/icons/timescircle";import{Ripple as T}from"primereact/ripple";function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function A(e){if(Array.isArray(e))return h(e)}function N(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function O(e,t){if(e){if("string"==typeof e)return h(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(e,t):void 0}}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e){return A(e)||N(e)||O(e)||w()}function R(e){if(Array.isArray(e))return e}function _(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,r,a,l,i=[],s=!0,c=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;s=!1}else for(;!(s=(n=a.call(o)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=o.return&&(l=o.return(),Object(l)!==l))return}finally{if(c)throw r}}return i}}function L(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function M(e,t){return R(e)||_(e,t)||O(e,t)||L()}var C=y.extend({defaultProps:{__TYPE:"Toast",id:null,className:null,style:null,baseZIndex:0,position:"top-right",transitionOptions:null,appendTo:"self",onClick:null,onRemove:null,onShow:null,onHide:null,onMouseEnter:null,onMouseLeave:null,children:void 0}});function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function x(e,t){if("object"!==P(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function D(e){var t=x(e,"string");return"symbol"===P(t)?t:String(t)}function j(e,t,o){return(t=D(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function k(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function F(e,t,o){return t&&k(e.prototype,t),o&&k(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function H(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var U=Object.freeze({STARTS_WITH:"startsWith",CONTAINS:"contains",NOT_CONTAINS:"notContains",ENDS_WITH:"endsWith",EQUALS:"equals",NOT_EQUALS:"notEquals",IN:"in",LESS_THAN:"lt",LESS_THAN_OR_EQUAL_TO:"lte",GREATER_THAN:"gt",GREATER_THAN_OR_EQUAL_TO:"gte",BETWEEN:"between",DATE_IS:"dateIs",DATE_IS_NOT:"dateIsNot",DATE_BEFORE:"dateBefore",DATE_AFTER:"dateAfter",CUSTOM:"custom"}),W=F((function e(){H(this,e)}));j(W,"ripple",!1),j(W,"inputStyle","outlined"),j(W,"locale","en"),j(W,"appendTo",null),j(W,"cssTransition",!0),j(W,"autoZIndex",!0),j(W,"hideOverlaysOnDocumentScrolling",!1),j(W,"nonce",null),j(W,"nullSortOrder",1),j(W,"zIndex",{modal:1100,overlay:1e3,menu:1e3,tooltip:1100,toast:1200}),j(W,"pt",void 0),j(W,"filterMatchModeOptions",{text:[U.STARTS_WITH,U.CONTAINS,U.NOT_CONTAINS,U.ENDS_WITH,U.EQUALS,U.NOT_EQUALS],numeric:[U.EQUALS,U.NOT_EQUALS,U.LESS_THAN,U.LESS_THAN_OR_EQUAL_TO,U.GREATER_THAN,U.GREATER_THAN_OR_EQUAL_TO],date:[U.DATE_IS,U.DATE_IS_NOT,U.DATE_BEFORE,U.DATE_AFTER]}),j(W,"changeTheme",(function(e,t,o,n){var r,a=document.getElementById(o),l=a.cloneNode(!0),i=a.getAttribute("href").replace(e,t);l.setAttribute("id",o+"-clone"),l.setAttribute("href",i),l.addEventListener("load",(function(){a.remove(),l.setAttribute("id",o),n&&n()})),null===(r=a.parentNode)||void 0===r||r.insertBefore(l,a.nextSibling)}));var J={en:{startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",filter:"Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",custom:"Custom",clear:"Clear",close:"Close",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",firstDayOfWeek:0,dateFormat:"mm/dd/yy",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyFilterMessage:"No available options",emptyMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"Page",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",previousPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",selectLabel:"Select",unselectLabel:"Unselect",expandLabel:"Expand",collapseLabel:"Collapse"}}};function Q(e,t){var o=t||W.locale;try{return B(o)[e]}catch(t){throw new Error("The ".concat(e," option is not found in the current locale('").concat(o,"')."))}}function B(e){return J[e||W.locale]}function Z(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function q(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(o),!0).forEach((function(t){j(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Z(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var z=e.memo(e.forwardRef((function(t,o){var n=t.messageInfo,r=t.ptCallbacks,l=r.ptm,i=r.ptmo,s=n.message,f=s.severity,y=s.content,h=s.summary,A=s.detail,N=s.closable,O=s.life,w=s.sticky,I=s.className,R=s.style,_=s.contentClassName,L=s.contentStyle,C=s.icon,P=s.closeIcon,x=s.pt,D={index:t.index},k=q(q({},t.metaData),D),F=M(e.useState(!1),2),H=F[1],U=M(a((function(){W()}),O||3e3,!w&&!F[0]),1)[0],W=function(){U(),t.onClose&&t.onClose(n)},J=function(e){!t.onClick||m.hasClass(e.target,"p-toast-icon-close")||m.hasClass(e.target,"p-toast-icon-close-icon")||t.onClick(n.message)},B=c("p-toast-message",j({},"p-toast-message-".concat(f),f),I),Z=c("p-toast-message-content",_),z=function(){if(n){var o=d.getJSXElement(y,{message:n.message,onClick:J,onClose:W}),r=u({className:"p-toast-message-icon"},l("icon",k),i(x,"icon",D)),a=C;if(!C)switch(f){case"info":a=e.createElement(g,r);break;case"warn":a=e.createElement(v,r);break;case"error":a=e.createElement(S,r);break;case"success":a=e.createElement(b,r)}var s=p.getJSXIcon(a,q({},r),{props:t}),c=u({className:"p-toast-message-text"},l("text",k),i(x,"text",D)),m=u({className:"p-toast-summary"},l("summary",k),i(x,"summary",D)),E=u({className:"p-toast-detail"},l("detail",k),i(x,"detail",D));return o||e.createElement(e.Fragment,null,s,e.createElement("div",c,e.createElement("span",m,h),A&&e.createElement("div",E,A)))}return null}(),G=function(){var o=u({className:"p-toast-icon-close-icon"},l("buttonicon",k),i(x,"buttonicon",D)),n=p.getJSXIcon(P||e.createElement(E,o),q({},o),{props:t}),r=t.ariaCloseLabel||Q("close"),a=u({type:"button",className:"p-toast-icon-close p-link",onClick:W,"aria-label":r},l("button",k),i(x,"button",D));return!1!==N?e.createElement("div",null,e.createElement("button",a,n,e.createElement(T,null))):null}(),V=u({ref:o,className:B,style:R,role:"alert","aria-live":"assertive","aria-atomic":"true",onClick:J,onMouseEnter:function(e){t.onMouseEnter&&t.onMouseEnter(e),e.defaultPrevented||w||(U(),H(!0))},onMouseLeave:function(e){t.onMouseLeave&&t.onMouseLeave(e),e.defaultPrevented||w||H(!1)}},l("message",k),i(x,"root",D)),X=u({className:Z,style:L},l("content",k),i(x,"content",D));return e.createElement("div",V,e.createElement("div",X,z,G))})));z.displayName="ToastMessage";var G=0,V=e.memo(e.forwardRef((function(a,m){var p=e.useContext(n),d=C.getProps(a,p),y=M(e.useState([]),2),b=y[0],v=y[1],g=e.useRef(null),E={props:d,state:{messages:b}},S=C.setMetaData(E),T=function(e){e&&v((function(t){return h(t,e,!0)}))},h=function(e,t,o){var n;if(Array.isArray(t)){var r=t.reduce((function(e,t){return e.push({_pId:G++,message:t}),e}),[]);n=o&&e?[].concat(I(e),I(r)):r}else{var a={_pId:G++,message:t};n=o&&e?[].concat(I(e),[a]):[a]}return n},A=function(){f.clear(g.current),v([])},N=function(e){v((function(t){return h(t,e,!1)}))},O=function(e){v((function(t){return t.filter((function(t){return t._pId!==e._pId}))})),d.onRemove&&d.onRemove(e.message)},w=function(e){O(e)},R=function(){d.onShow&&d.onShow()},_=function(){1===b.length&&f.clear(g.current),d.onHide&&d.onHide()};l((function(){f.set("toast",g.current,p&&p.autoZIndex||o.autoZIndex,d.baseZIndex||p&&p.zIndex.toast||o.zIndex.toast)}),[b,d.baseZIndex]),i((function(){f.clear(g.current)})),e.useImperativeHandle(m,(function(){return{props:d,show:T,replace:N,remove:O,clear:A,getElement:function(){return g.current}}}));var L,P,x=(L=c("p-toast p-component p-toast-"+d.position,d.className,{"p-input-filled":p&&"filled"===p.inputStyle||"filled"===o.inputStyle,"p-ripple-disabled":p&&!1===p.ripple||!1===o.ripple}),P=u({ref:g,id:d.id,className:L,style:d.style},C.getOtherProps(d),S.ptm("root")),e.createElement("div",P,e.createElement(t,null,b&&b.map((function(t,o){var n=e.createRef();return e.createElement(r,{nodeRef:n,key:t._pId,classNames:"p-toast-message",unmountOnExit:!0,timeout:{enter:300,exit:300},onEntered:R,onExited:_,options:d.transitionOptions},e.createElement(z,{ref:n,messageInfo:t,index:o,onClick:d.onClick,onClose:w,onMouseEnter:d.onMouseEnter,onMouseLeave:d.onMouseLeave,closeIcon:d.closeIcon,ptCallbacks:S,metaData:E}))})))));return e.createElement(s,{element:x,appendTo:d.appendTo})})));V.displayName="Toast";export{V as Toast};
